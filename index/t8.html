<!DOCTYPE html>
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251" />
<link rel="stylesheet" type="text/css" media="all" href="content/styles.css" />
<title>Арифметические команды.</title>
<link rel="shortcut icon" href="content/icon.ico" type="image/x-icon" />
</head>

<body class="body">
 <a name="up"></a>
 
 <!--шапка-->
 <div id="header">
    <div id="header-content">
		<p class="bonch"> Санкт-Петербургский государственный университет телекоммуникаций им. проф. М.А.Бонч-Бруевича<br>
	    <nobr style="color:#ff8000;">Программирование на Машинно-Ориентированных Языках</nobr>
	    </p>
		<a class="home" href="../index.html"><img title="На главную" src="content/home.png" ></a>
    <div id="main_menu">  
<!-- Главное Меню -->	  
<ul class="menu_mainmenu">
<li><a href="themes_3.html" >Теория (часть 1)</a>
<ul>
<li><a href="t1.html" >&diams;Регистры</a>
	<ul>
		<li><a href="t1.html#ron" >&diams;Регистры Общего Назначения</a></li>
		<li><a href="t1.html#ir" >&diams;Индексные Регистры</a></li>
		<li><a href="t1.html#rs" >&diams;Регистры Сегментов</a></li>
		<li><a href="t1.html#ru" >&diams;Регистры - Указатели</a></li>
		<li><a href="t1.html#ruk" >&diams;Регистр Указателя Команд</a></li>
		<li><a href="t1.html#rf" >&diams;Регистр Флагов</a></li>
	</ul>
</li>
<li><a href="t2.html">&diams;Сегменты, принцип сегментации</a></li>
<li><a href="t3.html">&diams;Стек</a></li>
<li><a href="t4.html" >&diams;Адресация</a>
	<ul>
		<li><a href="t4.html#ad" >&diams;Адресация данных</a></li>
		<li><a href="t4.html#ar" >&diams;Режимы адресации</a></li>
	</ul>
</li>
<li><a href="t5.html" >&diams;Организация программы</a>
	<ul>
		<li><a href="t5.html#ops" >&diams;Организация программы.Сегменты</a></li>
		<li><a href="t5.html#mp" >&diams;Модели памяти и упрощенные директивы определения сегментов</a></li>
		<li><a href="t5.html#dz" >&diams;Директивы задания набора допустимых команд</a></li>
	</ul>
</li>		
<li><a href="t6.html">&diams;Структура программы на языке Ассемблера</a>
	<ul>
		<li><a href="t6.html#st" >&diams;Структура программы на языке Ассемблера</a></li>
		<li><a href="t6.html#com" >&diams;Программа типа СОМ</a></li>
	</ul>
</li>
<li><a href="t7.html" >&diams;Инициализация и описание данных</a></li>
<li><a href="t8.html" >&diams;Арифметические команды</a>
	<ul style="top:-235px">
		<li><a href="t8.html#ks" >&diams;Команды сложения ADD, ADC, INC</a>
			<ul>
			<li><a href="t8.html#add" >&diams;ADD</a></li>
			<li><a href="t8.html#adc" >&diams;ADC</a></li>
			<li><a href="t8.html#inc" >&diams;INC</a></li>
			</ul></li>
		<li><a href="t8.html#kv" >&diams;Команды вычитания SUB, SBB, DEC и NEG</a>
		<ul>
			<li><a href="t8.html#kv" >&diams;SUB, SBB, DEC</a></li>
			<li><a href="t8.html#neg" >&diams;NEG</a></li>
		</ul></li>
		<li><a href="t8.html#ku" >&diams;Команды умножения MUL и IMUL</a>
		<ul>
			<li><a href="t8.html#mul" >&diams;MUL</a></li>
			<li><a href="t8.html#imul" >&diams;IMUL</a></li>
		</ul></li>
		<li><a href="t8.html#ubc" >&diams;Умножение больших чисел</a></li>
		<li><a href="t8.html#kd" >&diams;Команды деления DIV и IDIV</a></li>
		<li><a href="t8.html#pr" >&diams;Преобразование байта в слово и слова
		в двойное слово</a></li>
		<li><a href="t8.html#dbc" >&diams;Деление больших чисел</a></li>	
	</ul>
</li>
<li><a href="t9.html" >&diams;Команды передачи управления</a>
	<ul style="top:-215px">
		<li><a href="t9.html#jmp" >&diams;Команда безусловного перехода JMP</a></li>
		<li><a href="t9.html#usl" >&diams;Команды условной передачи управления</a></li>
		<li><a href="t9.html#znak" >&diams;Знаковые и беззнаковые данные</a></li>
		<li><a href="t9.html#bzd" >&diams;Переходы для беззнаковых данных</a></li>
		<li><a href="t9.html#zd" >&diams;Переходы для знаковых данных</a></li>
		<li><a href="t9.html#sp" >&diams;Специальные арифметические проверки</a></li>
	</ul>
</li>
<li><a href="t80.html" >&diams;Команды сдвигов</a></li>	
</ul>

 
<li><a href="themes_3.html" >Теория (часть 2)</a>
<ul>
<li><a href="t81.html">&diams;Команды логических операций</a></li>
<li><a href="t90.html">&diams;Команды циклов</a></li>
<li><a href="t91.html">&diams;Работа с подпрограммами</a></li>
<li><a href="t10.html" >&diams;Операции ввода с клавиатуры и вывода на экран в DOS приложениях</a>
	<ul>
		<li><a href="t10.html#output" >&diams;Вывод на экран средствами DOS</a></li>
		<li><a href="t10.html#input" >&diams;Ввод данных с клавиатуры</a></li>
		<li><a href="t10.html#str-name" >&diams;Ввод и вывод имен (строк)</a>
		<ul style="top:-82px"><li><a href="t10.html#str-out" >&diams;Вывод текста запроса</a></li>
			<li><a href="t10.html#str-in" >&diams;Ввод имени с клавиатуры</a></li>
			<li><a href="t10.html#str-zv" >&diams;Установка звукового сигнала и ограничителя '$'</a></li>
			<li><a href="t10.html#str-centr" >&diams;Центрирование и вывод имени на экран</a></li>
			<li><a href="t10.html#clear" >&diams;Очистить экран</a></li>
			<li><a href="t10.html#str" >&diams;Установка курсора (строка/столбец)</a></li>
		</ul></li>
		<li><a href="t10.html#pr" >&diams;Преобразование строки в число и числа в строку</a>
		<ul><li><a href="t10.html#asc" >&diams;Преобразование ASCII-формата в двоичный формат</a></li>
		    <li><a href="t10.html#toAsc" >&diams;Преобразование двоичного формата в ASCII-формат</a></li>
		</ul></li>	</ul>
</li>
<li><a href="t10-2.html" >&diams;Программирование в UNIX</a>
	<ul style="top:-50px">
		<li><a href="t10-2.html#pr_unix" >&diams;Программирование в LINUX (первый пример)</a></li>
		<li><a href="t10-2.html#make" >&diams;Утилита make</a></li>
		<li><a href="t10-2.html#perem" >&diams;Переменные</a></li>
		<li><a href="t10-2.html#output" >&diams;Вывод на экран через INT 80H</a></li>
		<li><a href="t10-2.html#printf" >&diams;Вывод с помощью printf</a></li>
		<li><a href="t10-2.html#vizov" >&diams;Вызов функций scanf и printf из Nasm</a></li>
		<li><a href="t10-2.html#arifm" >&diams;Арифметические операции  в формате ASCII</a>
		<ul style="top:-137px">
		<li><a href="t10-2.html#sloz" >&diams;Сложение в ASCII-формате</a></li>
		<li><a href="t10-2.html#vic" >&diams;Вычитание в ASCII-формате</a></li>
		<li><a href="t10-2.html#umn" >&diams;Умножение в ASCII-формате</a></li>
		<li><a href="t10-2.html#del" >&diams;Деление в ASCII-формате</a></li>
		<li><a href="t10-2.html#bcd" >&diams;Двоично-десятичный формат (SCD)</a></li>
	</ul></li></ul>
</li>	
<li><a href="t13.html">&diams;EXE и COM форматы</a>
	<ul style="top:-171px">
		<li><a href="t13.html#rp" >&diams;Распределение программы в памяти</a></li>
		<li><a href="t13.html#exe+com" >&diams;EXE- и COM-программы</a></li>
		<li><a>&diams;EXE</a>
		<ul><li><a href="t13.html#exe" >&diams;Заголовок EXE-файла</a></li>
		<li><a href="t13.html#exe-str" >&diams;Описание структуры заголовка EXE 
		файла и таблицы расположения сегментов</a></li>
		</ul></li>
		<li><a href="t13.html#pzpp" >&diams;Процесс загрузки программ в память</a></li>
		<li><a href="t13.html#prps" >&diams;Префикс программного сегмента</a></li>
		<li><a href="t13.html#str-psp" >&diams;Структура PSP</a></li>
		<li><a href="t13.html#exe-pr" >&diams;EXE-программы</a></li>
		<li><a href="t13.html#com-pr" >&diams;COM-программы</a></li>
		<li><a href="t13.html#exit-pr" >&diams;Выход из программы</a></li>
	</ul>
</li>
<li><a href="t11.html" >&diams;Обработка массивов</a>
	<ul style="top:-36px">
		<li><a href="t11.html#str" >&diams;Обработка строк</a></li>
		<li><a href="t11.html#m1" >&diams;Обработка одномерных массивов</a></li>
		<li><a href="t11.html#m2" >&diams;Двумерные массивы</a></li>
		</ul>
</li>	
<li><a href="t12.html" >&diams;Математический сопроцессор</a>
	<ul style="top:-190px">
		<li><a href="t12.html#ms" >&diams;Математический сопроцессор</a></li>
		<li><a href="t12.html#och" >&diams;Особые числав</a></li>
		<li><a href="t12.html#reg" >&diams;Регистры</a></li>
		<li><a href="t12.html#rd" >&diams;Регистры данных</a></li>
		<li><a href="t12.html#sc" >&diams;Система команд</a></li>
		<li><a href="t12.html#uoc" >&diams;Условные обозначения для команд базового сопроцессора</a></li>
		<li><a>&diams;Команды</a><ul>
			<li><a href="t12.html#cpd" >&diams;Команды пересылки данных</a></li>
			<li><a href="t12.html#czk" >&diams;Команды загрузки констант</a></li>
			<li><a href="t12.html#ak" >&diams;Арифметические команды</a></li>
			<li><a href="t12.html#sak" >&diams;Специальные арифметические команды</a></li>
		</ul></li></ul>
</li>	
<li><a href="t14.html">&diams;Машинные коды</a>
	<ul style="top:-140px">
		<li><a href="t14.html#mk" >&diams;Машинные коды</a></li>
		<li><a href="t14.html#bko" >&diams;Байт кода операции</a></li>
		<li><a href="t14.html#bsa" >&diams;Байт способа адресации</a></li>
		<li><a href="t14.html#ra" >&diams;Режимы адресации</a></li>
		<li><a href="t14.html#pras" >&diams;Примеры ассемблирования</a></li>
	</ul>
</li>		
</ul>


<li><a href="themes_1.html" >Практикум</a>
<ul>
<li><a href="l1.html" > &diams; Лабораторная Работа №1 </a></li>
<li><a href="l2.html" > &diams; Лабораторная Работа №2</a></li>
<li><a href="l3.html" > &diams; Лабораторная Работа №3</a></li>
<li><a href="l4.html" > &diams; Лабораторная Работа №4</a></li>
<li><a href="l5.html" > &diams; Лабораторная Работа №5</a></li>
</ul>  </ul>
<!-- Главное Меню -- END -->
</div>
</div>

</div>

  
 <!-- страничка-->
  <div id="width-page-00">
    <div id="page-00" style=" overflow:  hidden; height:  100%;">
		<marquee loop="-1" scrollamount="1" behavior="alternate" direction="up" height="100%">
		А р и ф м е т и ч е с к и е<p> </p>к о м а н д ы
		</marquee>
	</div>
</div>
   <div id="width-page">
      <div id="page">
		 <div id="page_content">
            <div class="themes"> 
	
	<h2>Арифметические команды.</h2>
	<p class="stress">	 </p> 
	<p class="text">
	Все арифметические команды устанавливают флаги <b>CF</b>, <b>AF</b>,
	<b>SF</b>, <b>ZF</b>, <b>OF</b> и <b>PF</b> в зависимости от результата
	операции.<br><br>
	Двоичные числа могут иметь длину  <b>8</b>, <b>16</b> и <b>32</b> бит.<br> 
	Значение старшего (самого левого бита) задает знак числа:<ul class="text">
	<li><b>0</b> – положительное,</li><li> <b>1</b> – отрицательное.</li></ul></p>
	<p class="text">Отрицательные числа представляются в так называемом 
	дополнительном коде, в котором для получения отрицательного числа 
	необходимо инвертировать все биты положительного числа и прибавить к 
	нему <b>1</b>. 
	<table border="1" cellspacing="0" cellpadding="10" width="80%" class="text" align="center">
		<tr>
			<td><b>Положительное:</b></td>
			<td>20 = 14h</td>
			<td>00010100b</td>
			<td></td>
		</tr>
		<tr>
			<td><b>Инверсное:<b></td>
			<td></td>
			<td>11101011b</td>
			<td></td>
		</tr>
		<tr>
			<td><b>Отрицательное:</b></td>
			<td></td>
			<td>11101100b</td>
			<td> = EC = -20</td>
		</tr>
		<tr>
			<td><b>Проверка:</b></td>
			<td>20 - 20 = 0</td>
			<td><center>&nbsp &nbsp00010100b<br> &nbsp &nbsp11101100b<br>
			<hr width="120px">(1)00000000b</center></td>
			<td></td>
		</tr>
	</table>
	</p>
	<a name="ks"></a>
	<h2>Команды сложения ADD, ADC, INC.</h2>

	<p class="stress">	 </p> 
	<p class="text">
		Командам <b>БЕЗРАЗЛИЧНО</b> какие числа складываются (<b>знаковые или
		нет</b>).<br><br>
		Если в результате сложения результат <b>НЕ</b> поместился в отведенное 
		место, устанавливается флаг переноса <b>CF=1</b>. Команда <b>ADC</b> как
		раз и реагирует на этот флаг. Вырабатываются еще <b>4</b> флага: 
		<b>PF</b>, <b>SF</b>, <b>ZF</b>, <b>OF</b>.<br><br>
		<h2>Состояние флагов после выполнения команд ADD, ADC, INC</h2>
	</p>
	<table border="1" cellspacing="0" cellpadding="10" width="80%" class="text" align="center">
		<tr>
			<td width="100px"><b>Флаг</b></td>
			<td><b>Пояснение</b></td>
		</tr>
		<tr>
			<td>CF=1</td>
			<td>Результат сложения НЕ поместился в операнде-приемнике</td>
		</tr>
		<tr>
			<td>PF=1</td>
			<td>Результат сложения имеет четное число бит со значением <b>1</b></td>
		</tr>
		<tr>
			<td>SF=1</td>
			<td>Копируется СТАРШИЙ (ЗНАКОВЫЙ) бит результата сложения</td>
		</tr>
		<tr>
			<td>ZF=1</td>
			<td>Результат сложения равен НУЛЮ</td>
		</tr>
		<tr>
			<td>OF=1</td>
			<td>Если при сложении двух чисел ОДНОГО знака результат сложения
			получился БОЛЬШЕ допустимого значения. В этом случае приемник
			МЕНЯЕТ ЗНАК.</td>
		</tr>
	</table>
	<a name="add"></a>
	<h2>Команда ADD (ADDition)</h2>

	<p class="stress">	 </p> 
	<p class="text">
		<big><b><ins>Назначение</ins>:</b></big> сложение двух операндов 
		источник и приемник размерностью байт, слово или двойное слово.<br> 
		<br><big><b><ins>Синтаксис</ins>:</b></big><code> ADD Приемник, 
		Источник</code><br><br>
		<big><b><ins>Алгоритм работы</ins>:</b></big><ul class="text"><li> 
			сложить операнды источник и приемник;</li><li>
			записать результат сложения в приемник;</li><li>
			установить флаги.</li></ul>
	</p>
	<p class="text">
		<big><b><ins>Логика работы</ins>:</b></big><code><Приемник> 
		= < Приемник> + <Источник></code><br><br>
		<big><b><ins>Применение</ins>:</b></big> Команда <b>add</b> используется
		для сложения двух целочисленных операндов. Результат сложения помещается
		по адресу первого операнда. Если результат сложения выходит за границы 
		операнда приемник (возникает переполнение), то учесть эту ситуацию следует
		путем анализа флага <b>cf</b> и последующего возможного применения команды
		<b>adc</b>.
	</p>
	<a name="adc"></a>
	<h2>Команда ADC (Addition with Carry)</h2>

	<p class="stress">	 </p> 
	<p class="text">
		<big><b><ins>Назначение</ins>:</b></big> cложение двух операндов с учетом 
		переноса из младшего разряда.<br><br>
	<big><b><ins>Синтаксис</ins>:</b></big><code> ADC Приемник, Источник</code>
	<br><br><big><b><ins>Алгоритм работы</ins>:</b></big><ul class="text"><li> 
			сложить два операнда;</li><li>
			поместить результат в первый операнд;</li><li>
			в зависимости от результата установить флаги.</li></ul>
	</p>
	<p class="text">
		<big><b><ins>Логика работы</ins>:</b></big><code><Приемник> = <Приемник> + 
		<Источник> + < CF ></code><br><br>
		<big><b><ins>Применение</ins>:</b></big> Команда <b>adc</b> используется при 
		сложении длинных двоичных чисел. Ее можно использовать как самостоятельно, так и
		совместно с командой <b>add</b>. При совместном использовании команды <b>adc</b> с
		командой <b>add</b> сложение младших байтов/слов/двойных слов осуществляется
		командой <b>add</b>, а уже старшие байты/слова/двойные слова складываются
		командой <b>adc</b>, учитывающей переносы из младших разрядов в старшие. 
		Таким образом, команда <b>adc</b> значительно расширяет диапазон значений
		складываемых чисел. <br>
		
		<table>
		<tr>
			<td width="333px"><code>.MODEL LARGE, C</code></td>
			<td></td>
		</tr>
		<tr>
			<td></td>
			<td> <comment>;x1=a1+b1 &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
		&nbsp x1,a1,b1:Long</comment></td>
		</tr>
		<tr>
			<td><code>.DATA <br>
			EXTRN x1:DWORD, a1:DWORD, b1:DWORD<br>
			.CODE<br>
			PUBLIC addaL<br>
			addaL PROC FAR</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>MOV AX, WORD PTR a1</code></td>
			<td><comment>; ax <== мл. часть а1 </comment></td>
		</tr>
		<tr>
			<td><code>MOV BX, WORD PTR a1+2</code></td>
			<td><comment>; bx <== ст. часть а1 </comment></td>
		</tr>
		<tr>
			<td><code>MOV CX, WORD PTR b1</code></td>
			<td><comment> ; cx <== мл. часть b1 </comment></td>
		</tr>
		<tr>
			<td><code>MOV DX, WORD PTR b1+2</code></td>
			<td><comment> ; dx <== ст. часть b1</comment></td>
		</tr>
		<tr>
			<td><code>ADD AX,CX</code></td>
			<td><comment>; < ax >:=< ax >+< cx ></comment></td>
			<td><comment>мл. часть</comment></td>
		</tr>
			
		<tr>
			<td><code>ADC BX,DX</code></td>
			<td width="252px"><comment> ; < bx >:=< bx >+< dx >+< CF >  </comment></td>
			<td><comment>ст. часть</comment></td>
		</tr>
		<tr>
			<td><code>MOV WORD PTR x1,AX</code></td>
			<td><comment> ; мл. часть х1 <==  < ax > </comment></td>
		</tr>
		<tr>
			<td><code>MOV WORD PTR x1+2,BX</code></td>
			<td><comment> ; ст. часть х1 <==  < bx ></comment></td>
		</tr>
		<tr>
			<td><code>RET<br>addaL ENDP</code></td>
			<td></td>
		</tr>
	</table> </p>
	<a name="inc"></a>
	<h2>Команда INC (INCrement operand by 1)</h2>

	<p class="stress">	 </p> 
	<p class="text">
		<big><b><ins>Назначение</ins>:</b></big> увеличение значения операнда в 
		памяти или регистре на <b>1</b>. <br><br> 
		<big><b><ins>Синтаксис</ins>:</b></big><code> INC Операнд </code><br><br>
		<big><b><ins>Алгоритм работы</ins>:</b></big> команда увеличивает операнд
		на единицу.<br><br>
		<big><b><ins>Логика работы</ins>:</b></big><code>< Операнд > = < Операнд 
		> + 1</code><br><br>
		<big><b><ins>Применение</ins>:</b></big> Команда используется для 
		увеличения значения байта, слова, двойного слова в памяти или 
		регистре на единицу. При этом команда не воздействует на
		флаг <b>cf</b>.<br><br><code>inc ax</code> <comment> &nbsp&nbsp&nbsp&nbsp
		&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ; увеличить значение в ax 
		на 1</comment><br>
	</p><br><br>
	
	<a name="kv"></a>
	<h2>Команды вычитания SUB, SBB, DEC и NEG </h2>
	
	<p class="stress">	 </p> 
	<p class="text">
		Команды вычитания <b>SUB</b>, <b>SBB</b>, <b>DEC</b> ОБРАТНЫ 
		соответствующим командам сложения <b>ADD</b>, <b>ADC</b> и <b>INC</b>.
		<br><b><ins>Они имеют те же самые операнды</ins>.</b> <br><br>
		<big><b>SUB</b></big> (SUBtract — Вычитание).<br><br><big>
		<b>SBB</b></big> (SuBtract with Borrow CF — Вычитание с заемом флага
		переноса <b>CF</b>).<br><br><b><big>DEC</big></b> (DECrement operand 
		by 1 — Уменьшение значения операнда на <b>1</b>).<br>
		<table>
		<tr>
			<td width="333px"><code>TITLE subaL</code></td>
			<td></td>
		</tr>
		<tr>
			<td></td>
			<td><comment> ; x1=a1-b1</comment></td>
		</tr>
		<tr>
			<td><code>DATA	SEGMENT PARA PUBLIC<br>
				EXTRN x1:DWORD,a1:DWORD,b1:DWORD<br> 
				DATA	ENDS<br>
				CODE	SEGMENT PARA PUBLIC<br>
				ASSUME CS:CODE,DS:DATA<br> 
				PUBLIC suba<br> 
				suba	PROC	FAR<br>
				MOV	AX,WORD PTR a1<br>
				MOV	BX,WORD PTR a1+2<br>
				MOV	CX,WORD PTR b1<br>
				MOV	DX, WORD PTR b1+2<br>
				SUB	AX,CX<br>
				SBB	BX,DX<br>
				MOV	WORD PTR x1,AX<br>
				MOV	WORD PTR x1+2,BX<br>
				RET<br>
				suba	ENDP<br>
				CODE	ENDS<br>
				END</code></td>
			<td></td>
		</tr>
	</table></p>
	
	<a name="neg"></a>
	<h2>Команда NEG (NEGate operand) </h2>

	<p class="stress">	 </p> 
	<p class="text">
		<big><b><ins>Назначение</ins>:</b></big> изменение знака (получение 
		двоичного дополнения) источника. <br><br> 
		<big><b><ins>Синтаксис</ins>:</b></big><code> NEG Операнд </code><br><br>
		<big><b><ins>Алгоритм работы</ins>:</b></big> <ul class="text"><li>
		выполнить вычитание (<b>0</b> – источник) и поместить результат на место
		источника;</li><li>если источник = <b>0</b>, то его значение не меняется.
		</li></ul></p><p class="text">
		<big><b><ins>Логика работы</ins>:</b></big><code>< Операнд > = - < Операнд 
		> </code><br><br>
		<big><b><ins>Применение</ins>:</b></big> Команда используется для 
		формирования двоичного дополнения операнда в памяти или регистре. 
		Операция двоичного дополнения предполагает инвертирование всех разрядов 
		операнда с последующим сложением операнда с двоичной единицей. Если операнд 
		отрицательный, то операция <b>neg</b> над ним означает получение его 
		модуля.
		<table>
		<tr>
			<td width="333px"><code>MOV AL,2</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>NEG AL</code></td>
			<td><comment> ; al=0feh — число -2 в дополнительном
			коде</comment></td>
		</tr>
		</table></p><br>
	<a name="ku"></a>
	<h2>Команды умножения MUL и IMUL </h2>
	<!--<p class="stress">	 </p> -->
	<a name="mul"></a>
	<h2>MUL (MULtiply) - беззнаковое умножение</h2>

	<p class="stress">	 </p> 
	<p class="text">
		<big><b><ins>Назначение</ins>:</b></big> операция умножения двух целых 
		чисел без учета знака. <br><br> 
		<big><b><ins>Синтаксис</ins>:</b></big><code> MUL сомножитель_1</code><br><br>
		<big><b><ins>Алгоритм работы</ins>:</b></big>
		Команда выполняет умножение двух целочисленных сомножителей. Один из сомножителей
		указан в качестве операнда. Расположение второго сомножителя указано
		<b>НЕЯВНО</b> и зависит от размера первого сомножителя.
		<ul class="text"><li> 
			если операнд, указанный в команде — <b>байт</b>, то второй сомножитель 
			должен располагаться в <b>al</b>;</li><li>
			если операнд, указанный в команде — <b>слово</b>, то второй сомножитель
			должен располагаться в <b>ax</b>;</li><li>
			если операнд, указанный в команде — <b>двойное слово</b>, то второй 
			сомножитель должен располагаться в <b>eax</b>.</li></ul></p> 
		<p class="text">
		От размера первого сомножителя также зависит размер результата.
		Результат умножения помещается также в фиксированное место,
		определяемое размером сомножителей: <ul class="text"><li>
			при умножении <b>байтов</b> результат помещается в <b>ax</b>;</li><li>
			при умножении <b>слов</b> результат помещается в пару <b>dx:ax</b>;
			</li><li>при умножении <b>двойных слов</b> результат помещается в 
			пару <b>edx:eax</b>.</li></ul></p><p class="text">
		<big><b><ins>Логика работы</ins>:</b></big><code><Произведение> = 
		<Сомножитель_1> * <Сомножитель_2> </code> <br>
		<center><IMG SRC="content/img/mul.png" width="666px"></center></p>
		<p class="text">
		Длина Произведения всегда в ДВА раза больше, чем у
		Множителя. Причем старшая часть Произведения находится либо в регистре
		<b>АН</b>, либо в <b>DX</b>.<br><br>Эти команды тоже вырабатывают флаги. 
		Устанавливаются флаги <b>CF=1</b> и <b>OF=1</b>, если результат слишком
		велик для отведенных ему регистров назначения.<br><br>
	</p>
		<a name="imul"></a>
	<h2>IMUL (Integer MULtiply) - умножение с учетом знака</h2>

	<p class="stress">	 </p> 
	<p class="text">
		<big><b><ins>Назначение</ins>:</b></big> операция умножения двух 
		целочисленных двоичных значений со знаком.<br>
		<ins>В отличии от <b>MUL</b>, команда может иметь <b>3</b> различных вида</ins>.<br> 
			<table>
				<tr>
					<td class="text"><big><b><ins>Синтаксис</ins>:</b></big></td>
					<td><code>&nbsp&nbspIMUL сомножитель_1</code></td>
				</tr>
				<tr>
					<td></td>
					<td><code>&nbsp&nbspIMUL сомножитель_1, сомножитель_2<br>
					&nbsp&nbspIMUL результат, сомножитель_1, сомножитель_2</code></td>
				</tr>
			</table>
	</p><p class="text">
		<big><b><ins>Алгоритм работы</ins>:</b></big>
		Алгоритм работы команды зависит от используемой формы команды. Форма команды
		с <b>одним операндом</b> требует явного указания местоположения только 
		одного сомножителя, который может быть расположен в ячейке памяти или регистре. 
		Местоположение второго сомножителя фиксировано и зависит от размера первого
		сомножителя:<ul class="text"><li> 
			если операнд, указанный в команде, — <b>байт</b>, то второй сомножитель 
			располагается в <b>al</b>;</li><li>
			если операнд, указанный в команде, — <b>слово</b>, то второй сомножитель
			располагается в <b>ax</b>;</li><li>
			если операнд, указанный в команде, — <b>двойное слово</b>, то второй 
			сомножитель располагается в <b>eax</b>.</li></ul></p><p class ="text">
		Результат умножения для команды с одним операндом также помещается в строго
		определенное место, определяемое размером сомножителей: <ul class="text"><li>
			при умножении <b>байтов</b> результат помещается в <b>ax</b>;</li><li>
			при умножении <b>слов</b> результат помещается в пару <b>dx:ax</b>;</li>
			<li>при умножении <b>двойных слов</b> результат помещается в пару 
			<b>edx:eax</b>.</li></ul></p><p class="text">
		<big>Команды с двумя и тремя операндами однозначно определяют расположение 
		результата и сомножителей следующим образом:</big> <ul class="text"><li>
			в команде <b>с двумя операндами</b> первый операнд определяет местоположение
			первого сомножителя. На его место впоследствии будет записан результат. 
			Второй операнд определяет местоположение второго сомножителя;</li><li>
			в команде <b>с тремя операндами</b> первый операнд определяет 
			местоположение результата, второй операнд — местоположение первого 
			сомножителя, третий операнд может быть непосредственно заданным значением 
			размером в байт, слово или двойное слово.</li></ul></p>
		<p class="text">
		<big><b><ins>Логика работы</ins>:</b></big><code><Произведение> = 
		<Сомножитель_1> * <Сомножитель_2> </code> <br>
		<center><IMG SRC="content/img/mul.png" width="666px"></center></p>
		<p class="text">
		Длина Произведения всегда в ДВА раза больше, чем у
		Множителя. Причем старшая часть Произведения находится либо в регистре
		<b>АН</b>, либо в <b>DX</b>.<br><br>Эти команды тоже вырабатывают флаги. 
		Устанавливаются флаги <b>CF=1</b> и <b>OF=1</b>, если результат слишком
		велик для отведенных ему регистров назначения.<br><br>
	</p>
	<a name="ubc"></a>
	<h2>Умножение больших чисел</h2>

	<p class="stress">	 </p> 
	<p class="text">
		Чтобы умножить большие числа, придется вспомнить правила умножения десятичных
		чисел в столбик: множимое умножают на каждую цифру множителя, сдвигают влево
		на соответствующее число разрядов и затем складывают полученные результаты. 
		В нашем случае роль цифр будут играть байты, слова или двойные слова, а 
		сложение должно выполняться по правилам сложения чисел повышенной точности.
		Алгоритм умножения оказывается заметно сложнее, поэтому умножим для примера
		только <b>64</b>-битные числа:<br>
		<table>
		<tr>
			<td colspan="2"><comment> ; беззнаковое умножение двух <b>64</b>-битных чисел 
		(<b>X</b> и <b>Y</b>) и сохранение <br> ; результата в 128-битное число
		<b>Z</b></comment></td>
		</tr>
		<tr>
			<td width="333px"><code>MOV  EAX,DWORD PTR X<br>
				MOV  EBX,EAX</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>MUL DWORD PTR Y </code></td>
			<td> <comment>; перемножить младшие двойные слова</comment></td>
		</tr>
		<tr>
			<td><code>MOV  DWORD PTR Z,EAX</code></td>
			<td> <comment> ; сохранить младшее слово произведения </comment></td>
		</tr>
		<tr>
			<td><code>MOV  ECX,EDX</code></td>
			<td><comment> ; сохранить старшее двойное слово</comment></td>
		</tr>
		<tr>
			<td><code>MOV   EAX,EBX </code></td>
			<td><comment> ; младшее слово "X" в еах</comment></td>
		</tr>
		<tr>
			<td><code>MUL  DWORD PTR Y[4] </code></td>
			<td><comment> ; умножить младшее слово на старшее</comment></td>
		</tr>
		<tr>
			<td><code> ADD  ЕАХ,ЕСХ</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>ADC  EDX,0 </code></td>
			<td><comment> ; добавить перенос</comment></td>
		</tr>
		<tr>
			<td><code>MOV  EBX,EAX </code></td>
			<td><comment> ; сохранить частичное произведение</comment></td>
		</tr>
		<tr>
			<td><code> MOV  ECX,EDX<BR>
			MOV  EAX,DWORD PTR x[4]</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code> MUL  DWORD PTR Y </code></td>
			<td><comment> ; умножить старшее слово на младшее</comment></td>
		</tr>
		<tr>
			<td><code> ADD  EAX,EBX </code></td>
			<td><comment> ; сложить с частичным произведением</comment></td>
		</tr>
		<tr>
			<td><CODE>MOV  DWORD PTR z[4],EAX<BR>
			ADC  ECX,EDX<BR>
			MOV  EAX,DWORD PTR X[4]</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>MUL DWORD PTR Y[4] </code></td>
			<td><comment> ; умножить старшие слова</comment></td>
		</tr>
		<tr>
			<td><code>ADD   EAX,ECX</code></td>
			<td> <comment> ; сложить с частичным произведением</comment></td>
		</tr>
		<tr>
			<td> <code>ADC  EDX,0 </code></td>
			<td><comment> ; и добавить перенос</comment></td>
		</tr>
		<tr>
			<td><code>MOV        WORD PTR Z[8],EAX<BR>
				MOV   WORD PTR z[12],EDX</code></td>
			<td></td>
		</tr>
	</table></p>
		<p class="text"> 
		Чтобы выполнить умножение со знаком, потребуется сначала определить знаки 
		множителей, изменить знаки отрицательных множителей, выполнить обычное 
		умножение и изменить знак результата, если знаки множителей были разными.
		</p><br>
	<a name="kd"></a>
	<h2>Команды деления DIV и IDIV </h2>

	<p class="stress">	 </p> 
	<p class="text">
		<big><b><ins>Назначение</ins>:</b></big><br><big><b>DIV</b></big> выполнение
		операции деления двух двоичных беззнаковых значений. <br>
		<big><b>IDIV</b></big> операция деления двух двоичных значений со знаком.
		<br>
		<table>
				<tr>
					<td class="text"><big><b><ins>Синтаксис</ins>:</b></big></td>
					<td><code>&nbsp&nbspDIV делитель</code></td>
				</tr>
				<tr>
					<td></td>
					<td><code>&nbsp&nbspIDIV делитель</code></td>
				</tr>
			</table></p>
	<p class="text">
		<big><b><ins>Алгоритм работы</ins>:</b></big>
		Для команды необходимо задание двух операндов — делимого и делителя. Делимое 
		задается неявно и размер его зависит от размера делителя, который указывается
		в команде:<ul class="text"><li> 
			если делитель размером в <b>байт</b>, то делимое должно быть расположено
			в регистре <b>ax</b>. После операции частное помещается в <b>al</b>, а 
			остаток — в <b>ah</b>;</li><li>
			если делитель размером в <b>слово</b>, то делимое должно быть расположено
			в паре регистров <b>dx:ax</b>, причем младшая часть делимого находится в
			<b>ax</b>. После операции частное помещается в <b>ax</b>, а остаток — в
			<b>dx</b>;</li><li>
			если делитель размером в <b>двойное слово</b>, то делимое должно быть 
			расположено в паре регистров <b>edx:eax</b>, причем младшая часть делимого
			находится в <b>eax</b>. После операции частное помещается в <b>eax</b>,
			а остаток — в <b>edx</b>.</li></ul></p><p class="text">
		<big><b><ins>Логика работы</ins>:</b></big><code>< Частное: Остаток> = 
		<Делимоё> / <Делитель> </code><br><br>
		Команда <b>IDIV</b> реагирует на ЗНАК обрабатываемых чисел.<br><br>
		Результат состоит из Частного и Остатка, которым при обычных целочисленных 
		вычислениях пренебрегают.<br><br>
		Длина Делимого всегда в ДВА раза больше, чем у Делителя. Причем старшая часть
		Делимого находится либо в регистре <b>АН</b>, либо в <b>DX</b>. <br><br>
		Эти команды тоже вырабатывают флаги. Но устанавливаются флаги <b>CF=1</b> и 
		<b>OF=1</b>, если частное НЕ помещается в регистры <b>AL</b> или <b>АХ</b>.
		<br><br>Здесь, в отличие от команд умножения, может генерироваться ПРЕРЫВАНИЕ
		<b>"Деление на ноль”</b>.<br><br>
		<big><b><ins>Применение</ins>:</b></big> Команда выполняет целочисленное 
		деление операндов с выдачей результата деления в виде частного и остатка от 
		деления. При выполнении операции деления возможно возникновение исключительной
		ситуации: <b>0</b> — ошибка деления. Эта ситуация возникает в одном из двух 
		случаев: делитель равен <b>0</b> или частное слишком велико для его 
		размещения в регистре <b>eax</b>/<b>ax</b>/<b>al</b>.
	</p><br>
		
	<a name="pr"></a>
	<h2>Преобразование байта в слово и слова в двойное слово </h2>

	<p class="stress">	 </p> 
	<p class="text">
		Данное преобразование для <b>знаковых</b> и <b>беззнаковых</b> данных 
		осуществляется по разному.<br><br>
		<b>БЕЗЗНАКОВЫЕ</b> числа занимают всю ячейку памяти, понятие знак для 
		них НЕ существует - они считаются ПОЛОЖИТЕЛЬНЫМИ. Поэтому при преобразовании
		БЕЗЗНАКОВЫХ чисел в СТАРШУЮ часть результата надо занести НОЛЬ. 
		Это можно сделать уже известными нам командами: <b>MOV АН,0</b> или 
		<b>MOV DX,0</b>. Однако это НЕ эффективно, используем родную для компьютера
		<b>команду сложения по модулю 2</b>:<br><code> XOR АН,АН</code> или <code>
		XOR DX,DX</code>.<br><br>
		Для <b>ЗНАКОВЫХ</b> данных существуют две команды распространения знака.<br> 
		<big><b>CBW</b></big> (Convert Byte toWord — преобразовать <b>байт</b>, находящийся
		в регистре <b>AL</b>, <b>в слово</b> — регистр <b>АХ</b>) и<br> 
		<big><b>CWD</b></big> (Convert Word to Double word — преобразовать <b>слово</b>, 
		находящееся в регистре <b>АХ</b>, <b>в двойное слово</b> — регистры <b>< DX:AX ></b>).
		<br><br>
		<table>
				<tr>
					<td class="text"><big><b><ins>Синтаксис</ins>:</b></big></td>
					<td><code>&nbsp&nbspCBW</code></td>
				</tr>
				<tr>
					<td></td>
					<td><code>&nbsp&nbspCWD</code></td>
				</tr>
			</table></p>
	<p class="text">
		 Операнды им <b>НЕ</b> нужны.<br><br>
		<big><b><ins>Логика работы</ins>:<br>CBW</b></big><br>	
		<table border="1" cellspacing="0" cellpadding="10" width="80%" class="text" align="center">
		<tr>
			<td>Получаем старшую часть (АН)</td>
			<td colspan="2"> Известная младшая часть (AL)</td>
		</tr>
		<tr>
			<td>Биты 15 - 8</td>
			<td>Знак-бит<br>7</td>
			<td>Биты 6 - 0</td>
		</tr>
		<tr>
			<td>1111 1111</td>
			<td>1</td>
			<td>Информационная часть числа</td>
		</tr>
		<tr>
			<td>0000 0000</td>
			<td>0</td>
			<td>Информационная часть числа</td>
		</tr>
		<tr>
			<td colspan="3"><center>Результат AX</center></td>
	
		</tr>
	</table></p><p class="text">
	<big><b>CWD</b></big><br>	
		<table border="1" cellspacing="0" cellpadding="10" width="80%" class="text" align="center">
		<tr>
			<td>Получаем старшую часть (DX)</td>
			<td colspan="2"> Известная младшая часть (AX)</td>
		</tr>
		<tr>
			<td>Биты 31 - 16</td>
			<td>Знак-бит<br>15</td>
			<td>Биты 14 - 0</td>
		</tr>
		<tr>
			<td>1111 1111 1111 1111</td>
			<td>1</td>
			<td>Информационная часть числа</td>
		</tr>
		<tr>
			<td>0000 0000 0000 0000</td>
			<td>0</td>
			<td>Информационная часть числа</td>
		</tr>
		<tr>
			<td colspan="3"><center>Результат DX:AX</center></td>
		</tr>
	</table></p><p class="text">
		<big><b><ins>Применение</ins>:</b></big> <ul class="text"><li>
		Команда <b>CBW</b> используется для приведения операндов к нужной размерности
		с учетом знака. Такая необходимость может, в частности, возникнуть при 
		программировании арифметических операций.</li><li>
		Команда <b>CWD</b> используется для расширения значения знакового бита в 
		регистре <b>ax</b> на биты регистра <b>dx</b>. Данную операцию, в частности, 
		можно использовать для подготовки к операции деления, для которой размер делимого 
		должен быть в два раза больше размера делителя, либо для приведения операндов к 
		одной размерности в командах умножения, сложения, вычитания.</li></ul></p><br>
		
	<a name="dbc"></a>
	<h2>Деление больших чисел </h2>
	<p class="stress">	 </p> 
	<p class="text">	
		Общий алгоритм деления числа любого размера на число любого размера нельзя 
		построить с использованием команды <b>DIV</b> — такие операции выполняются 
		при помощи сдвигов и вычитаний и оказываются весьма сложными. Рассмотрим 
		сначала менее общую операцию (деление любого числа на слово или двойное слово),
		которую можно легко выполнить с помощью команд <b>DIV</b>. <br><br>
		<comment>; деление 64-битного числа divident на 16-битное число divisor.</comment><br>
		<comment>; Частное помещается в 64-битную переменную quotent,</comment><br>
		<comment>; а остаток - в 16-битную переменную modulo</comment><br>
        <code>MOV        AX,WORD PTR DIVIDENT[6]<br>
        XOR        DX,DX<BR>
        DIV        DIVISOR<BR>
        MOV        WORD PTR QUOTENT[6],AX<BR>
        MOV        AX,WORD PTR DIVIDENT[4]<BR>
        DIV        DIVISOR<BR>
        MOV        WORD PTR QUOTENT[4],AX<BR>
        MOV        AX,WORD PTR DIVIDENT[2]<BR>
        DIV        DIVISOR<BR>
        MOV        WORD PTR QUOTENT[2],AX<BR>
        MOV        AX,WORD PTR DIVIDENT<BR>
        DIV        DIVISOR<BR>
        MOV        WORD PTR QUOTENT,AX<BR>
        MOV        MODULO,DX</code><br><br>
		Деление любого другого числа полностью аналогично — достаточно только добавить нужное 
		число троек команд <b>mov</b>/<b>div</b>/<b>mov</b> в начало алгоритма.<br><br>
		Наиболее очевидный алгоритм для деления чисел любого размера на числа любого размера — 
		деление в столбик с помощью последовательных вычитаний делителя (сдвинутого влево на
		соответствующее количество разрядов) из делимого, увеличивая соответствующий разряд 
		частного на <b>1</b> при каждом вычитании, пока не останется число, меньшее делителя
		(остаток):<br>
		<table>
		<tr>
			<td colspan="2"><comment>; деление 64-битного числа в EDX:EAX на 
			64-битное число в ЕСХ:ЕВХ.</comment><br><comment>; Частное помещается 
			в EDX:EAX, и остаток - в ESI:EDI</comment></td>
		</tr>
		<tr>
			<td width="333px"><code>MOV   EBP,64 </code></td>
			<td><comment> ; счетчик бит</comment></td>
		</tr>
		<tr>
			<td><code>XOR  ESI,ESI</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>XOR  EDI,EDI</code></td>
			<td><comment> ; остаток = 0 </comment></td>
		</tr>
		<tr>
			<td><code>bitloop:<br>SHL   EAX,1<BR>RCL   EDX,1</code></td>
			<td></td>
		</tr>
		<tr>
			<td> <code>RCL  EDI,1</code></td>
			<td> <comment> ; сдвиг на 1 бит влево 128-битного числа</comment></td>
		</tr>
		<tr>
			<td><code>RCL   ESI,1</code></td>
			<td><comment> ; ESI:EDI:EDX:EAX</comment></td>
		</tr>
		<tr>
			<td><codE>CMP  ESI,ECX</CODE></td>
			<td><comment> ; сравнить старшие двойные слова</comment></td>
		</tr>
		<tr>
			<td><code>JA  divide<br>JB  next</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>CMP EDI,EBX</code></td>
			<td><comment> ; сравнить младшие двойные слова</comment></td>
		</tr>
		<tr>
			<td><code>JB  next<br>
			divide:<br>SUB  EDI,EBX</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>SBB   ESI,ECX</code></td>
			<td><comment> ; ESI:EDI = EBX:ECX</comment></td>
		</tr>
		<tr>
			<td><code>INC  EAX </code></td>
			<td><comment> ; установить младший бит в ЕАХ</comment></td>
		</tr>
		<tr>
			<td><code>next:<br>DEC  EBP</code></td>
			<td><comment> ; повторить цикл 64 раза</comment></td>
		</tr>
		<tr>
			<td><code>JNE bitloop</code></td>
			<td></td>
		</tr>
	</table></p>
	<p class="text">
	Несмотря на то что этот алгоритм не использует сложных команд, он выполняется на порядок
	дольше, чем одна команда <b>DIV</b>.
	</p>
	<p class="stress">	 </p> 
	<center><b><a class="orange" href="l1.html">Лабораторная работа №1</a></b></center>
 <!-- страничка -- END -->
   </div></div></div>
 
      <div id="basement"><div id="basement-content">
         <div id="basement_text">
            <br>Программирование на Машинно-Ориентированных Языках.<br>
			Преподаватель: Коробов С.А.<br><br>
      </div>
	  <a class="home2" href="../index.html"><img title="На главную" src="content/home.png"></a>
	  <a class="book" href="themes_3.html"><img title="К оглавлению" src="content/book.png"></a>
	  </div>    
	  <a class="min1" href="t7.html"><img title="Предыдущая тема" src="content/left.png"></a>
	  <a class="max1" href="t9.html"><img title="Следующая тема" src="content/right.png"></a>
	  </div>
</body>
 </html>
