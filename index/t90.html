<!DOCTYPE html>
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251" />
<link rel="stylesheet" type="text/css" media="all" href="content/styles.css" />
<title>Команды циклов.</title>
<link rel="shortcut icon" href="content/icon.ico" type="image/x-icon" />
</head>

<body class="body">
 <a name="up"></a>
 
 
 <!--шапка-->
 <div id="header">
    <div id="header-content">
		<p class="bonch"> Санкт-Петербургский государственный университет телекоммуникаций им. проф. М.А.Бонч-Бруевича<br>
	    <nobr style="color:#ff8000;">Программирование на Машинно-Ориентированных Языках</nobr>
	    </p>
		<a class="home" href="../index.html"><img title="На главную" src="content/home.png" ></a>
    <div id="main_menu">  
<!-- Главное Меню -->	  
<ul class="menu_mainmenu">
<li><a href="themes_3.html" >Теория (часть 1)</a>
<ul>
<li><a href="t1.html" >&diams;Регистры</a>
	<ul>
		<li><a href="t1.html#ron" >&diams;Регистры Общего Назначения</a></li>
		<li><a href="t1.html#ir" >&diams;Индексные Регистры</a></li>
		<li><a href="t1.html#rs" >&diams;Регистры Сегментов</a></li>
		<li><a href="t1.html#ru" >&diams;Регистры - Указатели</a></li>
		<li><a href="t1.html#ruk" >&diams;Регистр Указателя Команд</a></li>
		<li><a href="t1.html#rf" >&diams;Регистр Флагов</a></li>
	</ul>
</li>
<li><a href="t2.html">&diams;Сегменты, принцип сегментации</a></li>
<li><a href="t3.html">&diams;Стек</a></li>
<li><a href="t4.html" >&diams;Адресация</a>
	<ul>
		<li><a href="t4.html#ad" >&diams;Адресация данных</a></li>
		<li><a href="t4.html#ar" >&diams;Режимы адресации</a></li>
	</ul>
</li>
<li><a href="t5.html" >&diams;Организация программы</a>
	<ul>
		<li><a href="t5.html#ops" >&diams;Организация программы.Сегменты</a></li>
		<li><a href="t5.html#mp" >&diams;Модели памяти и упрощенные директивы определения сегментов</a></li>
		<li><a href="t5.html#dz" >&diams;Директивы задания набора допустимых команд</a></li>
	</ul>
</li>		
<li><a href="t6.html">&diams;Структура программы на языке Ассемблера</a>
	<ul>
		<li><a href="t6.html#st" >&diams;Структура программы на языке Ассемблера</a></li>
		<li><a href="t6.html#com" >&diams;Программа типа СОМ</a></li>
	</ul>
</li>
<li><a href="t7.html" >&diams;Инициализация и описание данных</a></li>
<li><a href="t8.html" >&diams;Арифметические команды</a>
	<ul style="top:-235px">
		<li><a href="t8.html#ks" >&diams;Команды сложения ADD, ADC, INC</a>
			<ul>
			<li><a href="t8.html#add" >&diams;ADD</a></li>
			<li><a href="t8.html#adc" >&diams;ADC</a></li>
			<li><a href="t8.html#inc" >&diams;INC</a></li>
			</ul></li>
		<li><a href="t8.html#kv" >&diams;Команды вычитания SUB, SBB, DEC и NEG</a>
		<ul>
			<li><a href="t8.html#kv" >&diams;SUB, SBB, DEC</a></li>
			<li><a href="t8.html#neg" >&diams;NEG</a></li>
		</ul></li>
		<li><a href="t8.html#ku" >&diams;Команды умножения MUL и IMUL</a>
		<ul>
			<li><a href="t8.html#mul" >&diams;MUL</a></li>
			<li><a href="t8.html#imul" >&diams;IMUL</a></li>
		</ul></li>
		<li><a href="t8.html#ubc" >&diams;Умножение больших чисел</a></li>
		<li><a href="t8.html#kd" >&diams;Команды деления DIV и IDIV</a></li>
		<li><a href="t8.html#pr" >&diams;Преобразование байта в слово и слова
		в двойное слово</a></li>
		<li><a href="t8.html#dbc" >&diams;Деление больших чисел</a></li>	
	</ul>
</li>
<li><a href="t9.html" >&diams;Команды передачи управления</a>
	<ul style="top:-215px">
		<li><a href="t9.html#jmp" >&diams;Команда безусловного перехода JMP</a></li>
		<li><a href="t9.html#usl" >&diams;Команды условной передачи управления</a></li>
		<li><a href="t9.html#znak" >&diams;Знаковые и беззнаковые данные</a></li>
		<li><a href="t9.html#bzd" >&diams;Переходы для беззнаковых данных</a></li>
		<li><a href="t9.html#zd" >&diams;Переходы для знаковых данных</a></li>
		<li><a href="t9.html#sp" >&diams;Специальные арифметические проверки</a></li>
	</ul>
</li>
<li><a href="t80.html" >&diams;Команды сдвигов</a></li>	
</ul>

 
<li><a href="themes_3.html" >Теория (часть 2)</a>
<ul>
<li><a href="t81.html">&diams;Команды логических операций</a></li>
<li><a href="t90.html">&diams;Команды циклов</a></li>
<li><a href="t91.html">&diams;Работа с подпрограммами</a></li>
<li><a href="t10.html" >&diams;Операции ввода с клавиатуры и вывода на экран в DOS приложениях</a>
	<ul>
		<li><a href="t10.html#output" >&diams;Вывод на экран средствами DOS</a></li>
		<li><a href="t10.html#input" >&diams;Ввод данных с клавиатуры</a></li>
		<li><a href="t10.html#str-name" >&diams;Ввод и вывод имен (строк)</a>
		<ul style="top:-82px"><li><a href="t10.html#str-out" >&diams;Вывод текста запроса</a></li>
			<li><a href="t10.html#str-in" >&diams;Ввод имени с клавиатуры</a></li>
			<li><a href="t10.html#str-zv" >&diams;Установка звукового сигнала и ограничителя '$'</a></li>
			<li><a href="t10.html#str-centr" >&diams;Центрирование и вывод имени на экран</a></li>
			<li><a href="t10.html#clear" >&diams;Очистить экран</a></li>
			<li><a href="t10.html#str" >&diams;Установка курсора (строка/столбец)</a></li>
		</ul></li>
		<li><a href="t10.html#pr" >&diams;Преобразование строки в число и числа в строку</a>
		<ul><li><a href="t10.html#asc" >&diams;Преобразование ASCII-формата в двоичный формат</a></li>
		    <li><a href="t10.html#toAsc" >&diams;Преобразование двоичного формата в ASCII-формат</a></li>
		</ul></li>	</ul>
</li>
<li><a href="t10-2.html" >&diams;Программирование в UNIX</a>
	<ul style="top:-50px">
		<li><a href="t10-2.html#pr_unix" >&diams;Программирование в LINUX (первый пример)</a></li>
		<li><a href="t10-2.html#make" >&diams;Утилита make</a></li>
		<li><a href="t10-2.html#perem" >&diams;Переменные</a></li>
		<li><a href="t10-2.html#output" >&diams;Вывод на экран через INT 80H</a></li>
		<li><a href="t10-2.html#printf" >&diams;Вывод с помощью printf</a></li>
		<li><a href="t10-2.html#vizov" >&diams;Вызов функций scanf и printf из Nasm</a></li>
		<li><a href="t10-2.html#arifm" >&diams;Арифметические операции  в формате ASCII</a>
		<ul style="top:-137px">
		<li><a href="t10-2.html#sloz" >&diams;Сложение в ASCII-формате</a></li>
		<li><a href="t10-2.html#vic" >&diams;Вычитание в ASCII-формате</a></li>
		<li><a href="t10-2.html#umn" >&diams;Умножение в ASCII-формате</a></li>
		<li><a href="t10-2.html#del" >&diams;Деление в ASCII-формате</a></li>
		<li><a href="t10-2.html#bcd" >&diams;Двоично-десятичный формат (SCD)</a></li>
	</ul></li></ul>
</li>	
<li><a href="t13.html">&diams;EXE и COM форматы</a>
	<ul style="top:-171px">
		<li><a href="t13.html#rp" >&diams;Распределение программы в памяти</a></li>
		<li><a href="t13.html#exe+com" >&diams;EXE- и COM-программы</a></li>
		<li><a>&diams;EXE</a>
		<ul><li><a href="t13.html#exe" >&diams;Заголовок EXE-файла</a></li>
		<li><a href="t13.html#exe-str" >&diams;Описание структуры заголовка EXE 
		файла и таблицы расположения сегментов</a></li>
		</ul></li>
		<li><a href="t13.html#pzpp" >&diams;Процесс загрузки программ в память</a></li>
		<li><a href="t13.html#prps" >&diams;Префикс программного сегмента</a></li>
		<li><a href="t13.html#str-psp" >&diams;Структура PSP</a></li>
		<li><a href="t13.html#exe-pr" >&diams;EXE-программы</a></li>
		<li><a href="t13.html#com-pr" >&diams;COM-программы</a></li>
		<li><a href="t13.html#exit-pr" >&diams;Выход из программы</a></li>
	</ul>
</li>
<li><a href="t11.html" >&diams;Обработка массивов</a>
	<ul style="top:-36px">
		<li><a href="t11.html#str" >&diams;Обработка строк</a></li>
		<li><a href="t11.html#m1" >&diams;Обработка одномерных массивов</a></li>
		<li><a href="t11.html#m2" >&diams;Двумерные массивы</a></li>
		</ul>
</li>	
<li><a href="t12.html" >&diams;Математический сопроцессор</a>
	<ul style="top:-190px">
		<li><a href="t12.html#ms" >&diams;Математический сопроцессор</a></li>
		<li><a href="t12.html#och" >&diams;Особые числав</a></li>
		<li><a href="t12.html#reg" >&diams;Регистры</a></li>
		<li><a href="t12.html#rd" >&diams;Регистры данных</a></li>
		<li><a href="t12.html#sc" >&diams;Система команд</a></li>
		<li><a href="t12.html#uoc" >&diams;Условные обозначения для команд базового сопроцессора</a></li>
		<li><a>&diams;Команды</a><ul>
			<li><a href="t12.html#cpd" >&diams;Команды пересылки данных</a></li>
			<li><a href="t12.html#czk" >&diams;Команды загрузки констант</a></li>
			<li><a href="t12.html#ak" >&diams;Арифметические команды</a></li>
			<li><a href="t12.html#sak" >&diams;Специальные арифметические команды</a></li>
		</ul></li></ul>
</li>	
<li><a href="t14.html">&diams;Машинные коды</a>
	<ul style="top:-140px">
		<li><a href="t14.html#mk" >&diams;Машинные коды</a></li>
		<li><a href="t14.html#bko" >&diams;Байт кода операции</a></li>
		<li><a href="t14.html#bsa" >&diams;Байт способа адресации</a></li>
		<li><a href="t14.html#ra" >&diams;Режимы адресации</a></li>
		<li><a href="t14.html#pras" >&diams;Примеры ассемблирования</a></li>
	</ul>
</li>		
</ul>


<li><a href="themes_1.html" >Практикум</a>
<ul>
<li><a href="l1.html" > &diams; Лабораторная Работа №1 </a></li>
<li><a href="l2.html" > &diams; Лабораторная Работа №2</a></li>
<li><a href="l3.html" > &diams; Лабораторная Работа №3</a></li>
<li><a href="l4.html" > &diams; Лабораторная Работа №4</a></li>
<li><a href="l5.html" > &diams; Лабораторная Работа №5</a></li>
</ul>  </ul>
<!-- Главное Меню -- END -->
</div>
</div>

</div>

  
 <!-- страничка-->
  <div id="width-page-00">
    <div id="page-00" style=" overflow:  hidden; height:  100%;">
		<marquee loop="-1" scrollamount="1" behavior="alternate" direction="up" height="100%">
		К о м а н д ы<p> </p>ц и к л о в
		</marquee>
	</div>
</div>
   <div id="width-page">
      <div id="page">
		 <div id="page_content">
            <div class="themes"> 
	
	<a name="loopx"></a>
	<h2>Команды циклов LOOPx</h2>
	<p class="stress"></p>
	<p class="text">
		Группа команд условного перехода <b>LOOPх</b> служит для организации
		циклов в программах. Все команды цикла используют регистр <b>CX</b> в 
		качестве счетчика цикла. Простейшая из них – команда <b>LOOP</b>. Она 
		уменьшает содержимое <b>CX на 1</b> и передает управление на указанную 
		метку, если содержимое <b>CX не равно 0</b>. Если вычитание <b>1</b> из
		<b>CX</b> привело к нулевому результату, выполняется команда, следующая 
		за <b>LOOP</b>.<br><br>
		<big><b><ins>Синтаксис</ins>:</b></big><code>LOOP короткая метка </code>
		<br><big><b><ins>Логика работы</ins>:</b></big><code><br>СХ = Counter<br>
		short_label:<br><comment>; Выполнение тела цикла<br></comment>СХ = СХ - 1<br>
		if (СХ != 0) goto short_label </code><br><br>
		<big><b><ins>Аналог реализации команды LOOP на Ассемблере</ins>:</b></big>
		<code><br>MOV СХ, Counter <br>short_label:<br><comment>
		; Выполнение тела цикла <br>; Проверка условия ПРОДОЛЖЕНИЯ цикла</comment>
		<br>DEC СХ<br> СМР СХ, 0<br>JNE short_label</code><br><br>
		Команда <b>LOOP</b> уменьшает содержимое регистра <b>СХ</b> на <b>1</b>, 
		затем передает управление метке <b>shorMabel</b>, если содержимое <b>СХ</b>
		не равно <b>0</b>. Передача управления на метку <b>shortjabel</b> для 
		базовых процессоров — только КОРОТКАЯ<b>[-128,0]</b>. Поскольку условие 
		выхода из цикла проверяется в КОНЦЕ, при значении <b>Counter=0</b> цикл все
		равно выполнится. Этого мало, мы еще и зациклимся. Чтобы этого избежать, 
		обычно ДО НАЧАЛА ЦИКЛА проверяют содержимое регистра <b>СХ</b> на ноль. Таким
		образом, стандартная последовательность команд для организации цикла СО 
		СЧЕТЧИКОМ имеет следующий вид:<br><br><code>
		MOV CX, Counter<br>JCXZ ExitCicle <comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp ; если CX = 0, цикл ОБОЙТИ</comment>
		<br>short_label:<br><comment>; Выполнение тела цикла</comment><br>
		LOOP short_label<br>ExitCicle:</code><br><br>
		<big><b><ins>Пример</ins>:</b></big>Вычислить значение факториала 
		<b>р = n! = 1*2*3*...*n</b><br>Известно, что <b>0! = 1</b>. Отрицательным значение
		<b>n</b> быть НЕ может.<br><br><code>.Model Large,С<br><comment>
		; определение префикса для локальных меток</comment><br>
		locals @@ <br>.code<br>Extrn С n: Word<br>Extrn С p: Word<br>Public proizv1<br>
		Proizv1 Proc far <comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp ; Вариант 1</comment><br>mov cx,n<comment>
		 &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp ; количество повторений</comment><br>
		mov si,1<br>mov ax,si<br>jcxz @@Exit<comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp&nbsp ; if cx=0 then Exit</comment><br>
		@@begin: <comment>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp ; = НАЧАЛО цикла =<br></comment>
		mul si	<comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  
		; < dx:ax > = < ax >*< si ></comment><br>inc si<br><comment>
		; ==== Выход из цикла ==================<br></comment>
		loop @@begin<br>@@Exit:<br>mov p,ax<br>ret<br>proizv1 endp<br>Public proizv2<br> 
		Proizv2 Proc far <comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp ; Вариант 2</comment><br>
		mov cx ,n	<comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp ; количество повторений<br></comment>
		mov ax,1<br>jcxz @@Exit <comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp&nbsp ; if cx=0 then Exit</comment><br>
		@@begin: <comment>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp ; = НАЧАЛО цикла =</comment><br>
		mul cx <comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
		&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp  
		; < dx:ax > = < ax >*< cx > <br> 
		; ==== Выход из цикла =========</comment><br>
		loop @@begin<br>@@Exit:<br>mov p,ax ret<br>proizv2 endp end<br></code>
	</p>
	<a name="locals"></a>
	
	<h2>Директива locals</h2>
	<p class="stress"></p>
	<p class="text">
	Директива <b>locals</b> позволяет нам не думать о дублировании имен меток в
	разных подпрограммах. Метки с префиксом<b> @@ </b>считаются локальными. Если
	компилятор встретит метку с таким же именем, он просто при компиляции присвоит
	ей другое имя (обычно эти метки получают в конце имени номер, который увеличивается
	на единицу — все очень просто!).
	</p>
	
	<a name="loopz"></a>
	<h2>Команда LOOPE (LOOPZ)</h2>
	<p class="stress"></p>
	<p class="text">
	Команда <b>LOOPE (LOOPZ)</b> переход по счетчику <b>и если равно</b>.<br>
	Данная команда имеет два равнозначных мнемонических имени (<b>if Equal</b> 
	— если Равно или <b>if Zero</b> — если Ноль).<br> <br>
	<big><b><ins>Синтаксис команды</ins>:</b></big><br><code>
	LOOPE короткая_метка<br>LOOPZ короткая_метка</code><br><br>
	<big><b><ins>Логика работы команды</ins>:</b></big><br><code>
	СХ = Counter<br>Short_Label:<comment>; Выполнение тела цикла</comment><br>
	СХ = СХ - 1<br>if (СХ != 0 && ZF = 1) goto Short_Label</code><br><br>
	Все то, что говорилось для команды <b>LOOP</b>, справедливо и для команды 
	<b>LOOPE (LOOPZ)</b>, добавляется еще проверка флага<b> ZF</b>. Применяется 
	данная команда в случае, если нужно досрочно выйти из цикла, как только находится
	ПЕРВЫЙ элемент, ОТЛИЧНЫЙ от заданной величины.
	</p>
	
	<a name="loopnz"></a>
	<h2>Команда LOOPNE (LOOPNZ)</h2>
	<p class="stress"></p>
	<p class="text">
	Команда LOOPNE (LOOPNZ) переход по счетчику <b>и если НЕ равно</b>.<br>
	Данная команда тоже имеет два равнозначных мнемонических имени (<b>if Not
	Equal</b> — если НЕ равно или <b>if Not Zero</b> — если НЕ ноль). В отличие
	от предыдущей команды проверяется, сброшен ли флаг нуля <b>ZF=0</b>.<br> <br>
	<big><b><ins>Синтаксис команды</ins>:</b></big><br><code>
	LOOPNE короткая метка <br>LOOPNZ короткая_метка</code><br><br>
	<big><b><ins>Логика работы команды</ins>:</b></big><br><code>
	СХ = Counter<br>shortlabel: <comment>; Выполнение тела цикла</comment><br>
	СХ = СХ - 1<br>if (СХ != 0 && ZF == 0) goto shortlabel</code><br><br>
	Все то, что говорилось для предыдущей команды, справедливо и для команды 
	<b>LOOPNE (LOOPNZ)</b>. Применяется данная команда в случае, если нужно 
	досрочно выйти из цикла, как только находится ПЕРВЫЙ элемент, РАВНЫЙ заданной
	величине.
	<big><b><ins>Пример</ins>:</b></big>Вычислить значение суммы чисел натурального
	ряда: <b>s = 1+2+3+...+n</b>. Вычисления закончить, как только значение суммы 
	станет равным некоторому числу <b>k</b> или не будут перебраны все <b>n</b> чисел.
	<br><br><code>Extrn	С n:Word<br>Extrn	С s:Word<br>Extrn	С k:Word<br>
	Public	sum<br>sum Proc far<br>mov	cx,n<comment> &nbsp &nbsp &nbsp &nbsp &nbsp 
	&nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
	&nbsp  ; количество повторений</comment><br>xor	ax, ax<br>xor si, si<br>
	jcxz	@@Exit <comment> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp 
	&nbsp &nbsp &nbsp  &nbsp &nbsp &nbsp &nbsp ; if cx=0 then Exit</comment><br>
	@@begin: <comment>&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
	&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp ; = НАЧАЛО цикла =</comment><br>inc	si
	<br>add	ax, si<br>cmp	ах,k<br><comment> ; =Выход из цикла, если ax=k или сх=0 
	</comment><br>loopNE @@begin<br>@@Exit:<br>mov s,ax<br>ret<br>sum endp</code>
	</p>
	
 <!-- страничка -- END -->
   </div></div></div>
 
      <div id="basement"><div id="basement-content">
         <div id="basement_text">
            <br>Программирование на Машинно-Ориентированных Языках.<br>
			Преподаватель: Коробов С.А.<br><br>
      </div>
	  <a class="home2" href="../index.html"><img title="На главную" src="content/home.png"></a>
	  <a class="book" href="themes_3.html"><img title="К оглавлению" src="content/book.png"></a>
	  </div>    
	  <a class="min1" href="t81.html"><img title="Предыдущая тема" src="content/left.png"></a>
	  <a class="max1" href="t91.html"><img title="Следующая тема" src="content/right.png"></a>
	  </div>
</body>
 </html>
