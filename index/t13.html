<!DOCTYPE html>
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251" />
<link rel="stylesheet" type="text/css" media="all" href="content/styles.css" />
<title>EXE � COM �������.</title>
<link rel="shortcut icon" href="content/icon.ico" type="image/x-icon" />
</head>

<body class="body">
 <a name="up"></a>
 
 
 <!--�����-->
 <div id="header">
    <div id="header-content">
		<p class="bonch"> �����-������������� ��������������� ����������� ���������������� ��. ����. �.�.����-��������<br>
	    <nobr style="color:#ff8000;">���������������� �� �������-��������������� ������</nobr>
	    </p>
		<a class="home" href="../index.html"><img title="�� �������" src="content/home.png" ></a>
    <div id="main_menu">  
<!-- ������� ���� -->	  
<ul class="menu_mainmenu">
<li><a href="themes_3.html" >������ (����� 1)</a>
<ul>
<li><a href="t1.html" >&diams;��������</a>
	<ul>
		<li><a href="t1.html#ron" >&diams;�������� ������ ����������</a></li>
		<li><a href="t1.html#ir" >&diams;��������� ��������</a></li>
		<li><a href="t1.html#rs" >&diams;�������� ���������</a></li>
		<li><a href="t1.html#ru" >&diams;�������� - ���������</a></li>
		<li><a href="t1.html#ruk" >&diams;������� ��������� ������</a></li>
		<li><a href="t1.html#rf" >&diams;������� ������</a></li>
	</ul>
</li>
<li><a href="t2.html">&diams;��������, ������� �����������</a></li>
<li><a href="t3.html">&diams;����</a></li>
<li><a href="t4.html" >&diams;���������</a>
	<ul>
		<li><a href="t4.html#ad" >&diams;��������� ������</a></li>
		<li><a href="t4.html#ar" >&diams;������ ���������</a></li>
	</ul>
</li>
<li><a href="t5.html" >&diams;����������� ���������</a>
	<ul>
		<li><a href="t5.html#ops" >&diams;����������� ���������.��������</a></li>
		<li><a href="t5.html#mp" >&diams;������ ������ � ���������� ��������� ����������� ���������</a></li>
		<li><a href="t5.html#dz" >&diams;��������� ������� ������ ���������� ������</a></li>
	</ul>
</li>		
<li><a href="t6.html">&diams;��������� ��������� �� ����� ����������</a>
	<ul>
		<li><a href="t6.html#st" >&diams;��������� ��������� �� ����� ����������</a></li>
		<li><a href="t6.html#com" >&diams;��������� ���� ���</a></li>
	</ul>
</li>
<li><a href="t7.html" >&diams;������������� � �������� ������</a></li>
<li><a href="t8.html" >&diams;�������������� �������</a>
	<ul style="top:-235px">
		<li><a href="t8.html#ks" >&diams;������� �������� ADD, ADC, INC</a>
			<ul>
			<li><a href="t8.html#add" >&diams;ADD</a></li>
			<li><a href="t8.html#adc" >&diams;ADC</a></li>
			<li><a href="t8.html#inc" >&diams;INC</a></li>
			</ul></li>
		<li><a href="t8.html#kv" >&diams;������� ��������� SUB, SBB, DEC � NEG</a>
		<ul>
			<li><a href="t8.html#kv" >&diams;SUB, SBB, DEC</a></li>
			<li><a href="t8.html#neg" >&diams;NEG</a></li>
		</ul></li>
		<li><a href="t8.html#ku" >&diams;������� ��������� MUL � IMUL</a>
		<ul>
			<li><a href="t8.html#mul" >&diams;MUL</a></li>
			<li><a href="t8.html#imul" >&diams;IMUL</a></li>
		</ul></li>
		<li><a href="t8.html#ubc" >&diams;��������� ������� �����</a></li>
		<li><a href="t8.html#kd" >&diams;������� ������� DIV � IDIV</a></li>
		<li><a href="t8.html#pr" >&diams;�������������� ����� � ����� � �����
		� ������� �����</a></li>
		<li><a href="t8.html#dbc" >&diams;������� ������� �����</a></li>	
	</ul>
</li>
<li><a href="t9.html" >&diams;������� �������� ����������</a>
	<ul style="top:-215px">
		<li><a href="t9.html#jmp" >&diams;������� ������������ �������� JMP</a></li>
		<li><a href="t9.html#usl" >&diams;������� �������� �������� ����������</a></li>
		<li><a href="t9.html#znak" >&diams;�������� � ����������� ������</a></li>
		<li><a href="t9.html#bzd" >&diams;�������� ��� ����������� ������</a></li>
		<li><a href="t9.html#zd" >&diams;�������� ��� �������� ������</a></li>
		<li><a href="t9.html#sp" >&diams;����������� �������������� ��������</a></li>
	</ul>
</li>
<li><a href="t80.html" >&diams;������� �������</a></li>	
</ul>

 
<li><a href="themes_3.html" >������ (����� 2)</a>
<ul>
<li><a href="t81.html">&diams;������� ���������� ��������</a></li>
<li><a href="t90.html">&diams;������� ������</a></li>
<li><a href="t91.html">&diams;������ � ��������������</a></li>
<li><a href="t10.html" >&diams;�������� ����� � ���������� � ������ �� ����� � DOS �����������</a>
	<ul>
		<li><a href="t10.html#output" >&diams;����� �� ����� ���������� DOS</a></li>
		<li><a href="t10.html#input" >&diams;���� ������ � ����������</a></li>
		<li><a href="t10.html#str-name" >&diams;���� � ����� ���� (�����)</a>
		<ul style="top:-82px"><li><a href="t10.html#str-out" >&diams;����� ������ �������</a></li>
			<li><a href="t10.html#str-in" >&diams;���� ����� � ����������</a></li>
			<li><a href="t10.html#str-zv" >&diams;��������� ��������� ������� � ������������ '$'</a></li>
			<li><a href="t10.html#str-centr" >&diams;������������� � ����� ����� �� �����</a></li>
			<li><a href="t10.html#clear" >&diams;�������� �����</a></li>
			<li><a href="t10.html#str" >&diams;��������� ������� (������/�������)</a></li>
		</ul></li>
		<li><a href="t10.html#pr" >&diams;�������������� ������ � ����� � ����� � ������</a>
		<ul><li><a href="t10.html#asc" >&diams;�������������� ASCII-������� � �������� ������</a></li>
		    <li><a href="t10.html#toAsc" >&diams;�������������� ��������� ������� � ASCII-������</a></li>
		</ul></li>	</ul>
</li>
<li><a href="t10-2.html" >&diams;���������������� � UNIX</a>
	<ul style="top:-50px">
		<li><a href="t10-2.html#pr_unix" >&diams;���������������� � LINUX (������ ������)</a></li>
		<li><a href="t10-2.html#make" >&diams;������� make</a></li>
		<li><a href="t10-2.html#perem" >&diams;����������</a></li>
		<li><a href="t10-2.html#output" >&diams;����� �� ����� ����� INT 80H</a></li>
		<li><a href="t10-2.html#printf" >&diams;����� � ������� printf</a></li>
		<li><a href="t10-2.html#vizov" >&diams;����� ������� scanf � printf �� Nasm</a></li>
		<li><a href="t10-2.html#arifm" >&diams;�������������� ��������  � ������� ASCII</a>
		<ul style="top:-137px">
		<li><a href="t10-2.html#sloz" >&diams;�������� � ASCII-�������</a></li>
		<li><a href="t10-2.html#vic" >&diams;��������� � ASCII-�������</a></li>
		<li><a href="t10-2.html#umn" >&diams;��������� � ASCII-�������</a></li>
		<li><a href="t10-2.html#del" >&diams;������� � ASCII-�������</a></li>
		<li><a href="t10-2.html#bcd" >&diams;�������-���������� ������ (SCD)</a></li>
	</ul></li></ul>
</li>	
<li><a href="t13.html">&diams;EXE � COM �������</a>
	<ul style="top:-171px">
		<li><a href="t13.html#rp" >&diams;������������� ��������� � ������</a></li>
		<li><a href="t13.html#exe+com" >&diams;EXE- � COM-���������</a></li>
		<li><a>&diams;EXE</a>
		<ul><li><a href="t13.html#exe" >&diams;��������� EXE-�����</a></li>
		<li><a href="t13.html#exe-str" >&diams;�������� ��������� ��������� EXE 
		����� � ������� ������������ ���������</a></li>
		</ul></li>
		<li><a href="t13.html#pzpp" >&diams;������� �������� �������� � ������</a></li>
		<li><a href="t13.html#prps" >&diams;������� ������������ ��������</a></li>
		<li><a href="t13.html#str-psp" >&diams;��������� PSP</a></li>
		<li><a href="t13.html#exe-pr" >&diams;EXE-���������</a></li>
		<li><a href="t13.html#com-pr" >&diams;COM-���������</a></li>
		<li><a href="t13.html#exit-pr" >&diams;����� �� ���������</a></li>
	</ul>
</li>
<li><a href="t11.html" >&diams;��������� ��������</a>
	<ul style="top:-36px">
		<li><a href="t11.html#str" >&diams;��������� �����</a></li>
		<li><a href="t11.html#m1" >&diams;��������� ���������� ��������</a></li>
		<li><a href="t11.html#m2" >&diams;��������� �������</a></li>
		</ul>
</li>	
<li><a href="t12.html" >&diams;�������������� �����������</a>
	<ul style="top:-190px">
		<li><a href="t12.html#ms" >&diams;�������������� �����������</a></li>
		<li><a href="t12.html#och" >&diams;������ ������</a></li>
		<li><a href="t12.html#reg" >&diams;��������</a></li>
		<li><a href="t12.html#rd" >&diams;�������� ������</a></li>
		<li><a href="t12.html#sc" >&diams;������� ������</a></li>
		<li><a href="t12.html#uoc" >&diams;�������� ����������� ��� ������ �������� ������������</a></li>
		<li><a>&diams;�������</a><ul>
			<li><a href="t12.html#cpd" >&diams;������� ��������� ������</a></li>
			<li><a href="t12.html#czk" >&diams;������� �������� ��������</a></li>
			<li><a href="t12.html#ak" >&diams;�������������� �������</a></li>
			<li><a href="t12.html#sak" >&diams;����������� �������������� �������</a></li>
		</ul></li></ul>
</li>	
<li><a href="t14.html">&diams;�������� ����</a>
	<ul style="top:-140px">
		<li><a href="t14.html#mk" >&diams;�������� ����</a></li>
		<li><a href="t14.html#bko" >&diams;���� ���� ��������</a></li>
		<li><a href="t14.html#bsa" >&diams;���� ������� ���������</a></li>
		<li><a href="t14.html#ra" >&diams;������ ���������</a></li>
		<li><a href="t14.html#pras" >&diams;������� ���������������</a></li>
	</ul>
</li>		
</ul>


<li><a href="themes_1.html" >���������</a>
<ul>
<li><a href="l1.html" > &diams; ������������ ������ �1 </a></li>
<li><a href="l2.html" > &diams; ������������ ������ �2</a></li>
<li><a href="l3.html" > &diams; ������������ ������ �3</a></li>
<li><a href="l4.html" > &diams; ������������ ������ �4</a></li>
<li><a href="l5.html" > &diams; ������������ ������ �5</a></li>
</ul>  </ul>
<!-- ������� ���� -- END -->
</div>
</div>
</div>
  
  
 <!-- ���������-->
<div id="width-page-00">
    <div id="page-00" style=" overflow:  hidden; height:  100%;">
		<marquee loop="-1" scrollamount="1" behavior="alternate" direction="up" height="100%">
		� � � � � �<p> </p>� � � � � � � �  
		</marquee>
	</div>
</div>
 
   <div id="width-page">
      <div id="page">
		 <div id="page_content">
            <div class="themes"> 
		
    <a name="rp"></a>
	<h2>������������� ��������� � ������.</h2>
	<p class="stress">	 </p> 
	<p class="text">                  
	���������� ������������� ������ �� ������� ���������� ���������.
	<table>
		<tr>
			<td width="300px"><comment>; ������ ���������</comment><br>
			<code>DATA	SEGMENT<br>
			MSG	DB	������$�
			<br>DATA	ENDS
			<br>STK SEGMENT STACK
			<br>DB 256 dup(?)
			<br>STK ENDS</code>
			<br><comment>; ��� ���������</comment>
			<br><code>CODE	SEGMENT
			<br>ASSUME CS:CODE,DS:DATA,SS:STK
			<br>START:	
			<br>MOV	AX,DATA
			<br>MOV	DS,AX</code></td>
			<td><comment></comment></td>
		</tr>
		<tr>
			<td><code>MOV	AH,09H</code></td>
			<td><comment>; ����� ���������</comment></td>
		</tr>
		<tr>
			<td><code>MOV	DX,OFFSET MSG
			<br>INT	21H</code></td>
			<td><comment></comment></td>
		</tr>
		<tr>
			<td><code>MOV	AH,4CH</code></td>
			<td><comment>; ���������� ������</comment></td>
		</tr>
		<tr>
			<td><code>INT	21H
			<br>CODE ENDS
			<br>END	START</code></td>
			<td><comment></comment></td>
		</tr>
	</table><br>
	<p class="text">
	� ���� ��������� ���� ������� <b>���</b> �������� � <b>����</b> � ������ 
	<code>CODE</code>, <b>������</b> � ������ <code>DATA</code> � <b>�����</b> � 
	������ <code>STK</code>. ��������� <code>ASSUME</code> ��������� ����� ����
	���������, ������� � ����� ������ ����� ���� �������������, � ����������� ����������
	<b>CS</b> , <b>DS</b> � <b>SS</b> ��������������. ������������� ������ ��� 
	�������� ��������� �� ���������� �������� ����:
	<ul class="text"><li>������������� � ������ ��� ���������.<br><br>
		<img src="content/rasp-exe.PNG" width="600px">
	</li>
	<li>������������� � ������ ��� ���������.<br></li></ul><br>
		<img src="content/rasp-com.PNG" width="760px" style="margin-left:-3.3%">
	</p>
	<p class="text">
	����� ������������� � �������� <b>IP</b> ��������� �������� ������ ������� ��������� 
	������������ ������ �������� ��������, ����� �������� ������� � ������� <b>CS</b>. 
	���������, �������� ��� �������, �������� ���������� ���������, ��������� ������� 
	���������� �������� <b>IP</b> � ��� ������������� <b>CS</b> ��� ��������� ����� 
	��������� ������. <b>DS</b> ����� �������� ��������� ���������� �� ������ <b>PSP</b>,
	������� ��� ��� ������������� � ������ ���� �������� ��������� ����������� ��������
	<b>DS</b> ��������� �������� ������.
	</p>
	
	 <a name="exe+com"></a>
	<h2>EXE- � COM-���������.</h2>
	<p class="stress">	 </p> 
	<p class="text">   
	<b>DOS</b> ����� ��������� � ��������� ����������� ����� ���� ����� � <b>COM</b> � <b>EXE</b>.
	<br>����� ����������� ��������� ������������ ���������� <b>8086</b> � ���� �����, ��� 
	�������� (<code>JMP</code>) � ������ (<code>CALL</code>) ���������� ������������� ���������,
	��� ���� �������� ����� ����������� � ����� ����� ������. ��������� ������� �� ������� � 
	�������������, ��� ��� ����� ����������� � ������������� ������ (�� ����������� ��������� ����. ��������).
	<br><br>���� <b>COM</b>-������� � ��� �������� ����� ���� � ������ ���������. ����� 
	���� ����� �������� <b>����� 64K</b>.<br><br>
	���� <b>EXE</b>-������� �������� ����������� ���������, ��� ������ �������� ��������� 
	��������� ��������� ������ �� �������� � ����������� ������.</p>

	 <a name="exe"></a>
	<h2>��������� EXE-�����.</h2>
	<p class="stress">	 </p> 
	<p class="text">
	��������� <b>EXE</b>-����� ������� �� ��������������� ���� � ������� ������������ ���������
	(<b><i>Relocation Table</i></b>).  
	<center><table border="1" cellspacing="0" cellpadding="10" width="95%" class="text">
	<caption> <big><b>��������������� ���� �������� ��������� �������:</b></big></caption>
		<tr>
			<td>(0)2</td>
			<td>signature</td>
			<td>��� ����� <b>'MZ'</b> (<b>4Dh, 5Ah</b>), ����������������� ���� � ������� <b>EXE</b></td>
		</tr>
		<tr>
			<td>(+2)2</td>
			<td>part_pag</td>
			<td>����� ��������� �������� ��������� � ������ (�������� �������� <b>512</b> ����)</td>
		</tr>
		<tr>
			<td>(+4)2</td>
			<td>filesize</td>
			<td>������ ��������� � ��������� �� <b>512</b> ����</td>
		</tr>
		<tr>
			<td>(+6)2</td>
			<td>relitem</td>
			<td>����� ��������� � ������� ������������ ���������</td>
		</tr>
		<tr>
			<td>(+8)2</td>
			<td>hdr_size</td>
			<td>������ ��������� ����� � ���������� (����� ��������� <b>-16</b> ����)</td>
		</tr>
		<tr>
			<td>(+10)2</td>
			<td>min_mem</td>
			<td>����������� ���������� ������ � ����������, ������� ����� ���������������
			� ������ �� ������ ����������� ���������</td>
		</tr>
		<tr>
			<td>(+12)2</td>
			<td>max_mem</td>
			<td>������������ ���������� ������ � ����������, ������� ����� ��������������� �
			������ �� ������ ����������� ���������</td>
		</tr><tr>
			<td>(+14)2</td>
			<td>ss_reg</td>
			<td>�������� �������� �� ������ ���������, ������� ������������ ��� �������� 
			����������� �������� ����� <b>SS</b></td>
		</tr><tr>
			<td>(+16)2</td>
			<td>sp_reg</td>
			<td>�������� �������� �� ������ ���������, ������� ������������ ��� ��������
			�������� <b>SP</b></td>
		</tr><tr>
			<td>(+18)2</td>
			<td>chk_summ</td>
			<td>����������� ����� ���� ���� � �����</td>
		</tr><tr>
			<td>(+20)2</td>
			<td>ip_rcg</td>
			<td>�������� ��� �������� <b>IP</b>, ������� ����� ������������ ���
			��������� ������� ���������</td>
		</tr><tr>
			<td>(+22)2</td>
			<td>cs_reg</td>
			<td>�������� �� ������ ��������� ��� ��������� ����������� �������� ���� <b>CS</b></td>
		</tr><tr>
			<td>(+24)2</td>
			<td>relt_off</td>
			<td>�������� �� ������ ����� ������� ������������ ��������� ���������</td>
		</tr><tr>
			<td>(+26)2</td>
			<td>overlay</td>
			<td>����� �������, ����� <b>0</b> ��� ��������� ������</td>
		</tr>
	</table></center></p>
	<p class="text">
	������� ������������ ��������� ��������� ���������� ����� ����� ��������������� �������
	� ������� �� ��������������� �������� � ������� <code>"��������:�������"</code>. <br><br>
	������� ����� ����� ������� ������������ ��������� ������������� �� ������� ���������
	� ������� <b><ins>�����-�����������</ins></b>, � ������ ���������� ���� ���������. 
	</p>
		
	<a name="exe-str"></a>
	<h2>�������� ��������� ��������� EXE ����� � ������� ������������ ���������.</h2>
	<p class="stress">	 </p> 
	<p class="text">
		<code>typedef struct _EXE_HDR_ {
			<br>unsigned signature;
			<br>unsigned part_pag;
			<br>unsigned file_size;
			<br>unsigned rel_item;
			<br>unsigned hdr_size;
			<br>unsigned min_mem;
			<br>unsigned max_mem;
			<br>unsigned ss_reg;
			<br>unsigned sp_reg;
			<br>unsigned chk_summ;
			<br>unsigned ip_reg;
			<br>unsigned cs_reg;
			<br>unsigned relt_off;
			<br>unsigned overlay;
		<br>} EXE_HDR;
		<br>typedef struct _RELOC_TAB_ {
			<br>unsigned offset;
			<br>unsigned segment;
		<br>} RELOC_TAB</code>
	</p>
		
	<a name="pzpp"></a>
	<h2>������� �������� �������� � ������.</h2>
	<p class="stress">	 </p> 
	<p class="text">	
	<ins>�������� <b>COM-</b> � <b>EXE-��������</b> ���������� ��-�������, ������ ���� ���������
	��������, ������� ������������ ������� ��������� � ����� ������� ���������</ins>.<br><br> 
	������������ ���������� ���������� ����� ���������� ������� ������ ��� �������� ��������� 
	(������ <b>DOS</b> ��������� ��������� � ������� ������ ������, ���� ��� �������������� 
	�� ������� �������� � ������� ������).<br><br> 
	��������� <b>���</b> ����� ������  - ���� ������ <b>��� ���������� �����</b> � ���� ������ 
	<b>��� PSP � ���������</b>.<br><br> 	
	� ���� ������ ���������� ����� ���������� ���� ����� ���������.<br><br> 
	����������� ���� �������� �������� ��������� <b>PSP</b> � ������������ � ���������������� 
	��������� (���������� ������, ��������� ���������, ����� �������� ����� ������, �����������
	���������� ����� � �.�.)<br><br> 
	��������������� ����� ������� <b>Disk Transfer Area</b> (<b>DTA</b>) �� ������ �������� 
	<b>PSP</b> (<b>PSP:0080</b>). <br><br>
	������������� ��������� ������� ��������� �� ������� ������� � ������ ���� ����������
	��������������� �������� ���������. �� ����������� ������� ��������������� ���������� 
	�������� <b>AX</b> ��� ����� � ���������. ���� ������ ��� ������ ��������� �� ��������
	����������� �������������� ��������� ����������, �� �������������� � �������� <b>AL</b>
	� <b>AH</b> ������������ �������� <b>FF</b>.<br><br> 
	<ins>� ������ �������� ������� �� �������� �������� �������� <b>COM</b> � <b>EXE</b> 
	����� �����������</ins>. <br><br>
	<big><ins>��� COM-��������</ins>:</big><br>
	��� <b>COM</b>-��������, ������� ������������ ����� �������� ����� �������������� 
	���������, ����������� ������ ����� ��������� � ����� � ������ ��� � ������ �� 
	������ <b>PSP:0100</b>. ������ ������, ��������� ���� <b>COM</b> ����� �������� �� 
	���������� ���������, �� � ���� ������ ��� ������ ���� ��������� ���������� ����������
	���������, ��������� � �������� �������� ������ ����� <b>PSP</b>.<br><br> 	
	����� �������� ����� ������������ ������� ��� <b>COM</b>-�������� ��������� ��������� 
	��������: <ul class="text">
	<li>���������� �������� <b>CS, DS, ES, SS</b> ��������������� �� ������ <b>PSP</b>;</li> 
	<li>������� <b>SP</b> ��������������� �� ����� �������� <b>PSP</b>;</li> 
	<li>��� ������� ������ ����� <b>PSP</b> �������������� ���������;</li> 
	<li>� ���� ������������ ����� <b>0000</b>;</li> 
	<li>��������� ������ <b>IP</b> ��������������� �� <b>100h</b> (������ ���������) � 
	������� ������� <b>JMP</b> �� ������ <b>PSP:100</b>.</li></ul></p> 
	<p class="text">
	<big><ins>��� EXE-��������</ins>:</big><br>
	�������� <b>EXE</b>-�������� ���������� ����������� �������, ��� ��� ������� �
	���������� ���������� �������: <ul class="text">
	<li>����������� �� ���������� ����� <b>DOS</b> ��������������� ����� ��������� �����.</li> 
	<li>������������ ������ ������������ ������ �� �������:<br><code> 
		size=((file_size*512)-(hdr_size*16)-part_pag</code></li>
	<li>������������ �������� ������ ������������ ������ � <b>EXE</b>-����� ��� 
	<code>hdr_size*16</code>. </li>
	<li>����������� ���������� ����� ��� �������� <b>START_SEG</b>, ������ ������������ 
	�������� <b>PSP+100h</b>.</li> 
	<li>����������� ������ ����������� � ������ �� ������ <b>START_SEG:0000</b>.</li> 
	<li>����������� �������� ������� �����������, ��������������� � <b>EXE</b>-�����
	�� ��������� <b>relt_off</b>.</li> 
	<li>��� ������� �������� �������: <ol>
		<li>����������� ���������� �������� ������� ��� ��� ����������� ����� (<b>OFF,SEG</b>).</li> 
		<li>����������� ���������� ����� ������ ����������� <nobr>
		<code>REL_SEG = (START_SEG + SEG)</code></nobr></li>
		<li>���������� ����� �� ������ <b>REL_SEG:OFF</b>, � ����� ����� ������������ 
		�������� <b>START_SEG</b>, ����� ����� ������������ ������� �� ���� �� 
		������.</li> </ol></li>
	<li>������������ ������ ��� ���������, ������ �� �������� <b>min_mem</b> � <b>max_mem</b>.</li> 
	<li>���������������� ��������, � ��������� ����������� �� ����������.<br> 	
	��� ������������� �������� <b>ES</b> � <b>DS</b> ��������������� �� <b>PSP</b>, 
	������� <b>AX</b> ��������������� ��� ��, ��� � ��� <b>COM</b>-��������, � ���������� 
	������� ����� <b>SS</b> ������������ �������� <b>START_SEG + ss_reg</b>, � � 
	<b>SP</b> ������������ <b>sp_reg</b>.</li> 
	<li>��� ������� ��������� � <b>CS</b> ������������ <b>START_SEG+cs_reg</b>, � � <b>IP - ip_reg</b>.
	<br>����� ������ ���������� ��������, ������� ������������ ������� ������� ����������
	� ���� ���� �������� ��� <b>CS</b>, ����� �������� ��� <b>IP</b> � ����� ����� ���������
	������� �������� �������� <b>RETF</b> (������� �������� �� ������� ���������).</li></ul> 
	</p>
		
	<a name="prps"></a>
	<h2>������� ������������ �������� .</h2>
	<p class="stress">	 </p> <p>	
	<center><table border="1" cellspacing="0" cellpadding="10" width="95%" class="text">
		<tr>
			<td>(0)2</td>
			<td>int 20h</td>
			<td>�������� ��� ������� <b>int 20h</b> (��������� ����� ������������ ���
			������� ��� ���������� ����� ������)</td>
		</tr>
		<tr>
			<td>(+2)2</td>
			<td>mem_top</td>
			<td>������ ������� ��������� ������ � ������� � ���������</td>
		</tr>
		<tr>
			<td>(+4)1</td>
			<td>reserv1</td>
			<td>���������������</td>
		</tr>
		<tr>
			<td>(+5)5</td>
			<td>call_dsp</td>
			<td>������� ������ <b>FAR CALL</b> ���������� <b>MS-DOS</b></td>
		</tr>
		<tr>
			<td>(+10)4</td>
			<td>tcrm_adr</td>
			<td>����� ���������� (Terminate Address)</td>
		</tr>
		<tr>
			<td>(+14)4</td>
			<td>cbrk_adr</td>
			<td>����� ����������� <b>Ctrl-Break</b></td>
		</tr>
		<tr>
			<td>(+18)4</td>
			<td>crit_err</td>
			<td>����� ����������� ����������� ������</td>
		</tr><tr>
			<td>(+22)2</td>
			<td>pam psp</td>
			<td>������� <b>PSP</b> ���������, ����������� ������ 
			��������� (���������-��������)<b>SS</b></td>
		</tr><tr>
			<td>(+24)20</td>
			<td>file_tab</td>
			<td>������� �������� ������, ���� ����� ��������� ����� <b>0FFH</b>,
			�� ������� �� ������������</td>
		</tr><tr>
			<td>(+44)2</td>
			<td>env_seg</td>
			<td>������� ����� ������, ����������� ���������� �����</td>
		</tr><tr>
			<td>(+46)4</td>
			<td>ss_sp</td>
			<td>����� ����� <b>SS:SP</b> ���������</td>
		</tr><tr>
			<td>(+50)2</td>
			<td>max_open</td>
			<td>������������ ����� �������� ������ </td>
		</tr><tr>
			<td>(+52)4</td>
			<td>file_tba</td>
			<td>����� ������� �������� ������ </td>
		</tr><tr>
			<td>(+56)24</td>
			<td>reserv2</td>
			<td>���������������</td>
		</tr><tr>
			<td>(+80)3</td>
			<td>disp</td>
			<td>��������� ������� <b>DOS</b></td>
		</tr>
		<tr>
			<td>(+83)9</td>
			<td>reserv3</td>
			<td>���������������</td>
		</tr>
		<tr>
			<td>(+92)16</td>
			<td>fcb1</td>
			<td>������������� ��� ����������� <b>FCB</b>, ���� ������ �������� 
			��������� ������ �������� ���������� ��� �����</td>
		</tr>
		<tr>
			<td>(+108)20</td>
			<td>fcb2</td>
			<td>����������� ��� ������� ��������� ��������� ������ ���������� <b>fcb1</b></td>
		</tr>
		<tr>
			<td>(+128)1</td>
			<td>p_size</td>
			<td>����� �������� �������� � ����������������� ������� ����������, 
			���� ����� ������ � ������ <b>DTA</b>, ����������� �� ���������</td>
		</tr>
		<tr>
			<td>(+129)127</td>
			<td>parm</td>
			<td>����������������� ������� ����������, ����������� ��� ������� ��������� 
			�� ��������� ������ </td>
		</tr>
	</table></center></p>	
		
	<a name="str-psp"></a>
	<h2>��������� PSP.</h2>
	<p class="stress">	 </p>
	<p class="text">	
	<code>typedef struct _PSP_ {
        <br>unsigned char int20h[2];
       <br> unsigned mem_top;
       <br> unsigned char reserv1;
       <br> unsigned char call_dsp[5];
       <br> void far *term_adr;
      <br>  void far *cbrk_adr;
       <br> void far *crit_err;
       <br> unsigned parn_psp;
      <br>  unsigned char file_tab[20];
      <br>  unsigned env_seg;
      <br>  void far *ss_sp;
      <br>  unsigned max_open;
      <br>  void far *file_tba;
      <br>  unsigned char reserv2[24];
      <br>  unsigned char disp[3];
      <br>  unsigned char reserv3[9];
      <br>  unsigned char fcb1[16];
     <br>   unsigned char fcb2[20];
       <br> unsigned char p_size;
      <br>  unsigned char parm[127];
	<br>} PSP;
	</code>
	<br><br>	
	��������� ����� �������� �� <b>PSP</b> ����� ����������, ��� ��������� ��������� ������ ��� 
	�������, ������ ��������� ������, ����� ������� ������� ���������� ����� � �.�.<br><br> 
	��� ��������� ������ ����� ������ <b>PSP</b>?<br> ����� ������ ������� ��� ��� ��������, 
	���������� �� ����� ����������: ��� ������� ��������� ���� ����� ���������� �� ����� 
	�������� <b>DS</b> � <b>ES</b>. �� ���� ���� ����� ����� <b>DS:0000</b> ��� <b>ES:0000</b>
	(��� <b>COM</b>-�������� �� <b>PSP</b> ��������� ����� �������� <b>CS</b> � <b>SS</b>). 
	</p>
		
	<a name="exe-pr"></a>
	<h2>EXE-���������.</h2>
	<p class="stress">	 </p>
	<p class="text">			
	<b>EXE</b>-��������� �������� ��������� ����������� ���������, ������� ������� ����, 
	������ � �����. � �������� �������� ����������� ���������� ��������� <b>EXE</b> � 
	������ ����� � ����������� ����������� ������� ���������. ��� ��������, ��� ������ ����
	<br><code>mov	ax,data_seg<br>
	mov	ds,ax</code> <br>�<br><code> 
	call	my_far_proc</code><br>
	������ ���� ��������� (�����������), ����� ������ ��� ����, ��� ��������� ���� ��������� 
	� ����������� ��������� �������. <br><br>
	����� ����������� ���������� ���������� ������������ ������ ����������� ���������� ��������
	�������� (<b>FAR JMP</b>) � ������ <b>CS:IP</b>, ������������ �� ��������� <b>EXE</b>.<br><br>
	� ������ ��������� ���������� ���������� <b>EXE</b> -�������:<ul class="text">	
		<li><b>DS</b> � <b>ES</b> ��������� �� ������ <b>PSP</b></li>
		<li><b>CS, IP, SS</b> � <b>SP</b> ���������������� ����������, ���������� � ���������
		<b>EXE</b></li>
		<li>���� <b>PSP MemTop</b> (������� ��������� ������ ������� � ����������) �������� 
		��������, ��������� � ��������� <b>EXE</b>. ������ ��� ��������� ������ ������������
		���������</li></ul> 
	</p>

	<a name="com-pr"></a>
	<h2>COM-���������.</h2>
	<p class="stress">	 </p>
	<p class="text">	
	<b>COM</b>-��������� �������� ������������ ������� . ����� <b>COM</b>-����� ����������� � 
	����� � ���������� � ������, ������� � <b>PSP:0100h</b>. � ����� ������, <b>COM</b>-���������
	����� ������������ ������������� ��������, �� ����� ��� ������ ���� ��������� ���������� 
	������, ��������� <b>PSP</b> ��� ����.<br><br>
	<b>COM</b>-��������� ���������������� <b>EXE</b>-��������, ����� ���� �������� ��������� 
	������������ ������. ��� ������� �����������, ��� �� ��������� ����������� ���������, � 
	�������� ������ ����� �� �����, ��������� ��������� <b>EXE</b> � ������� ����� ����������� 
	� ����������� ������. <br><br>
	����� �������� ��������� ������ <b>COM</b>-���������:<ul class="text">
	<li><b>CS, DS, ES</b> � <b>SS</b> ��������� �� <b>PSP</b>;</li>
	<li><b>SP</b> ��������� �� ����� �������� <b>PSP</b> (������ <b>0FFFEH</b>, �� ����� ����
	� ������, ���� ������ <b>64K</b> ������� ����������);</li> 
	<li>����� �� �������� <b>06H</b> � <b>PSP</b> (��������� ����� � ����������� ��������) 
	���������, ����� ����� ������������ �������� ��������;</li>
	<li>��� ������ ������� �� ����������� ��������� ������������ ���������;</li>
	<li>����� <b>00H</b> �������� (<b>PUSH</b>) � ����;</li>
	<li><b>IP</b> �������� <b>100H</b> (������ ���� ������) � ���������� �������
	<nobr><code>JMP PSP:100H</code></nobr>.</li></ul>
	</p>

	<a name="exit-pr"></a>
	<h2>����� �� ���������.</h2>
	<p class="stress">	 </p>
	<p class="text">	
	��������� ��������� ����� ���������� ���������:<ul class="text">
	<li>����� ������� <b>4CH</b> (<b>EXIT</b>) ���������� <b>21H</b> � ����� ������,
	���������� �� �������� ���������;</li>
	<li>����� ������� <b>00H</b> ���������� <b>21H</b> ��� ���������� <b>INT 20H</b>,
	����� <b>CS</b> ��������� �� <b>PSP</b>.</li></ul></p>
	<p class="text">������� <b>DOS 4CH</b> ��������� ���������� ������������� �������� ��� ������, 
	������� ����� ���� �������� ���������� ���������� ��� �������� <b>COMMAND.COM "IF 
	ERRORLEVEL"</b>.<br><br>
	����� ����� ��������� ��������� � �������� �� ��������� ����������� (<b>TSR</b>),
	��������� ���� <b>INT 27H</b> , ���� ������� <b>31H</b> (<b>KEEP</b>) ����������
	<b>21H</b>. <br><br>
	��������� ������ ����� �� ������������, ��� ����������� ��� ����� ���� ������� <b>64K</b>,
	� ��� � ���� ������ ����� ������������ ��� ������ ��� ������������� ��������.
	</p>
	
 <!-- ��������� -- END -->
   </div></div></div>
 
      <div id="basement"><div id="basement-content">
         <div id="basement_text">
            <br>���������������� �� �������-��������������� ������.<br>
			�������������: ������� �.�.<br><br>
      </div>
	  <a class="home2" href="../index.html"><img title="�� �������" src="content/home.png"></a>
	  <a class="book" href="themes_3.html"><img title="� ����������" src="content/book.png"></a>
	  </div>
	  <a class="min1" href="t10-2.html"><img title="���������� ����" src="content/left.png"></a>
	  <a class="max1" href="t11.html"><img title="��������� ����" src="content/right.png"></a>
	  </div>
</body>
 </html>
