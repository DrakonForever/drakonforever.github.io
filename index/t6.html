<!DOCTYPE html>
<head>
<meta http-equiv="content-type" content="text/html; charset=windows-1251" />
<link rel="stylesheet" type="text/css" media="all" href="content/styles.css" />
<title>Структура программы на языке Ассемблера.</title>
<link rel="shortcut icon" href="content/icon.ico" type="image/x-icon" />
</head>

<body class="body">
 <a name="up"></a>
  <!--шапка-->
 <div id="header">
    <div id="header-content">
		<p class="bonch"> Санкт-Петербургский государственный университет телекоммуникаций им. проф. М.А.Бонч-Бруевича<br>
	    <nobr style="color:#ff8000;">Программирование на Машинно-Ориентированных Языках</nobr>
	    </p>
		<a class="home" href="../index.html"><img title="На главную" src="content/home.png" ></a>
    <div id="main_menu">  
<!-- Главное Меню -->	  
<ul class="menu_mainmenu">
<li><a href="themes_3.html" >Теория (часть 1)</a>
<ul>
<li><a href="t1.html" >&diams;Регистры</a>
	<ul>
		<li><a href="t1.html#ron" >&diams;Регистры Общего Назначения</a></li>
		<li><a href="t1.html#ir" >&diams;Индексные Регистры</a></li>
		<li><a href="t1.html#rs" >&diams;Регистры Сегментов</a></li>
		<li><a href="t1.html#ru" >&diams;Регистры - Указатели</a></li>
		<li><a href="t1.html#ruk" >&diams;Регистр Указателя Команд</a></li>
		<li><a href="t1.html#rf" >&diams;Регистр Флагов</a></li>
	</ul>
</li>
<li><a href="t2.html">&diams;Сегменты, принцип сегментации</a></li>
<li><a href="t3.html">&diams;Стек</a></li>
<li><a href="t4.html" >&diams;Адресация</a>
	<ul>
		<li><a href="t4.html#ad" >&diams;Адресация данных</a></li>
		<li><a href="t4.html#ar" >&diams;Режимы адресации</a></li>
	</ul>
</li>
<li><a href="t5.html" >&diams;Организация программы</a>
	<ul>
		<li><a href="t5.html#ops" >&diams;Организация программы.Сегменты</a></li>
		<li><a href="t5.html#mp" >&diams;Модели памяти и упрощенные директивы определения сегментов</a></li>
		<li><a href="t5.html#dz" >&diams;Директивы задания набора допустимых команд</a></li>
	</ul>
</li>		
<li><a href="t6.html">&diams;Структура программы на языке Ассемблера</a>
	<ul>
		<li><a href="t6.html#st" >&diams;Структура программы на языке Ассемблера</a></li>
		<li><a href="t6.html#com" >&diams;Программа типа СОМ</a></li>
	</ul>
</li>
<li><a href="t7.html" >&diams;Инициализация и описание данных</a></li>
<li><a href="t8.html" >&diams;Арифметические команды</a>
	<ul style="top:-235px">
		<li><a href="t8.html#ks" >&diams;Команды сложения ADD, ADC, INC</a>
			<ul>
			<li><a href="t8.html#add" >&diams;ADD</a></li>
			<li><a href="t8.html#adc" >&diams;ADC</a></li>
			<li><a href="t8.html#inc" >&diams;INC</a></li>
			</ul></li>
		<li><a href="t8.html#kv" >&diams;Команды вычитания SUB, SBB, DEC и NEG</a>
		<ul>
			<li><a href="t8.html#kv" >&diams;SUB, SBB, DEC</a></li>
			<li><a href="t8.html#neg" >&diams;NEG</a></li>
		</ul></li>
		<li><a href="t8.html#ku" >&diams;Команды умножения MUL и IMUL</a>
		<ul>
			<li><a href="t8.html#mul" >&diams;MUL</a></li>
			<li><a href="t8.html#imul" >&diams;IMUL</a></li>
		</ul></li>
		<li><a href="t8.html#ubc" >&diams;Умножение больших чисел</a></li>
		<li><a href="t8.html#kd" >&diams;Команды деления DIV и IDIV</a></li>
		<li><a href="t8.html#pr" >&diams;Преобразование байта в слово и слова
		в двойное слово</a></li>
		<li><a href="t8.html#dbc" >&diams;Деление больших чисел</a></li>	
	</ul>
</li>
<li><a href="t9.html" >&diams;Команды передачи управления</a>
	<ul style="top:-215px">
		<li><a href="t9.html#jmp" >&diams;Команда безусловного перехода JMP</a></li>
		<li><a href="t9.html#usl" >&diams;Команды условной передачи управления</a></li>
		<li><a href="t9.html#znak" >&diams;Знаковые и беззнаковые данные</a></li>
		<li><a href="t9.html#bzd" >&diams;Переходы для беззнаковых данных</a></li>
		<li><a href="t9.html#zd" >&diams;Переходы для знаковых данных</a></li>
		<li><a href="t9.html#sp" >&diams;Специальные арифметические проверки</a></li>
	</ul>
</li>
<li><a href="t80.html" >&diams;Команды сдвигов</a></li>	
</ul>

 
<li><a href="themes_3.html" >Теория (часть 2)</a>
<ul>
<li><a href="t81.html">&diams;Команды логических операций</a></li>
<li><a href="t90.html">&diams;Команды циклов</a></li>
<li><a href="t91.html">&diams;Работа с подпрограммами</a></li>
<li><a href="t10.html" >&diams;Операции ввода с клавиатуры и вывода на экран в DOS приложениях</a>
	<ul>
		<li><a href="t10.html#output" >&diams;Вывод на экран средствами DOS</a></li>
		<li><a href="t10.html#input" >&diams;Ввод данных с клавиатуры</a></li>
		<li><a href="t10.html#str-name" >&diams;Ввод и вывод имен (строк)</a>
		<ul style="top:-82px"><li><a href="t10.html#str-out" >&diams;Вывод текста запроса</a></li>
			<li><a href="t10.html#str-in" >&diams;Ввод имени с клавиатуры</a></li>
			<li><a href="t10.html#str-zv" >&diams;Установка звукового сигнала и ограничителя '$'</a></li>
			<li><a href="t10.html#str-centr" >&diams;Центрирование и вывод имени на экран</a></li>
			<li><a href="t10.html#clear" >&diams;Очистить экран</a></li>
			<li><a href="t10.html#str" >&diams;Установка курсора (строка/столбец)</a></li>
		</ul></li>
		<li><a href="t10.html#pr" >&diams;Преобразование строки в число и числа в строку</a>
		<ul><li><a href="t10.html#asc" >&diams;Преобразование ASCII-формата в двоичный формат</a></li>
		    <li><a href="t10.html#toAsc" >&diams;Преобразование двоичного формата в ASCII-формат</a></li>
		</ul></li>	</ul>
</li>
<li><a href="t10-2.html" >&diams;Программирование в UNIX</a>
	<ul style="top:-50px">
		<li><a href="t10-2.html#pr_unix" >&diams;Программирование в LINUX (первый пример)</a></li>
		<li><a href="t10-2.html#make" >&diams;Утилита make</a></li>
		<li><a href="t10-2.html#perem" >&diams;Переменные</a></li>
		<li><a href="t10-2.html#output" >&diams;Вывод на экран через INT 80H</a></li>
		<li><a href="t10-2.html#printf" >&diams;Вывод с помощью printf</a></li>
		<li><a href="t10-2.html#vizov" >&diams;Вызов функций scanf и printf из Nasm</a></li>
		<li><a href="t10-2.html#arifm" >&diams;Арифметические операции  в формате ASCII</a>
		<ul style="top:-137px">
		<li><a href="t10-2.html#sloz" >&diams;Сложение в ASCII-формате</a></li>
		<li><a href="t10-2.html#vic" >&diams;Вычитание в ASCII-формате</a></li>
		<li><a href="t10-2.html#umn" >&diams;Умножение в ASCII-формате</a></li>
		<li><a href="t10-2.html#del" >&diams;Деление в ASCII-формате</a></li>
		<li><a href="t10-2.html#bcd" >&diams;Двоично-десятичный формат (SCD)</a></li>
	</ul></li></ul>
</li>	
<li><a href="t13.html">&diams;EXE и COM форматы</a>
	<ul style="top:-171px">
		<li><a href="t13.html#rp" >&diams;Распределение программы в памяти</a></li>
		<li><a href="t13.html#exe+com" >&diams;EXE- и COM-программы</a></li>
		<li><a>&diams;EXE</a>
		<ul><li><a href="t13.html#exe" >&diams;Заголовок EXE-файла</a></li>
		<li><a href="t13.html#exe-str" >&diams;Описание структуры заголовка EXE 
		файла и таблицы расположения сегментов</a></li>
		</ul></li>
		<li><a href="t13.html#pzpp" >&diams;Процесс загрузки программ в память</a></li>
		<li><a href="t13.html#prps" >&diams;Префикс программного сегмента</a></li>
		<li><a href="t13.html#str-psp" >&diams;Структура PSP</a></li>
		<li><a href="t13.html#exe-pr" >&diams;EXE-программы</a></li>
		<li><a href="t13.html#com-pr" >&diams;COM-программы</a></li>
		<li><a href="t13.html#exit-pr" >&diams;Выход из программы</a></li>
	</ul>
</li>
<li><a href="t11.html" >&diams;Обработка массивов</a>
	<ul style="top:-36px">
		<li><a href="t11.html#str" >&diams;Обработка строк</a></li>
		<li><a href="t11.html#m1" >&diams;Обработка одномерных массивов</a></li>
		<li><a href="t11.html#m2" >&diams;Двумерные массивы</a></li>
		</ul>
</li>	
<li><a href="t12.html" >&diams;Математический сопроцессор</a>
	<ul style="top:-190px">
		<li><a href="t12.html#ms" >&diams;Математический сопроцессор</a></li>
		<li><a href="t12.html#och" >&diams;Особые числав</a></li>
		<li><a href="t12.html#reg" >&diams;Регистры</a></li>
		<li><a href="t12.html#rd" >&diams;Регистры данных</a></li>
		<li><a href="t12.html#sc" >&diams;Система команд</a></li>
		<li><a href="t12.html#uoc" >&diams;Условные обозначения для команд базового сопроцессора</a></li>
		<li><a>&diams;Команды</a><ul>
			<li><a href="t12.html#cpd" >&diams;Команды пересылки данных</a></li>
			<li><a href="t12.html#czk" >&diams;Команды загрузки констант</a></li>
			<li><a href="t12.html#ak" >&diams;Арифметические команды</a></li>
			<li><a href="t12.html#sak" >&diams;Специальные арифметические команды</a></li>
		</ul></li></ul>
</li>	
<li><a href="t14.html">&diams;Машинные коды</a>
	<ul style="top:-140px">
		<li><a href="t14.html#mk" >&diams;Машинные коды</a></li>
		<li><a href="t14.html#bko" >&diams;Байт кода операции</a></li>
		<li><a href="t14.html#bsa" >&diams;Байт способа адресации</a></li>
		<li><a href="t14.html#ra" >&diams;Режимы адресации</a></li>
		<li><a href="t14.html#pras" >&diams;Примеры ассемблирования</a></li>
	</ul>
</li>		
</ul>


<li><a href="themes_1.html" >Практикум</a>
<ul>
<li><a href="l1.html" > &diams; Лабораторная Работа №1 </a></li>
<li><a href="l2.html" > &diams; Лабораторная Работа №2</a></li>
<li><a href="l3.html" > &diams; Лабораторная Работа №3</a></li>
<li><a href="l4.html" > &diams; Лабораторная Работа №4</a></li>
<li><a href="l5.html" > &diams; Лабораторная Работа №5</a></li>
</ul>  </ul>
<!-- Главное Меню -- END -->
</div>
</div>

</div>

  
 <!-- страничка-->
  <div id="width-page-00">
    <div id="page-00" style=" overflow:  hidden; height:  100%;">
		<marquee loop="-1" scrollamount="1" behavior="alternate" direction="up" height="100%">
		С т р у к т у р а<p> </p>п р о г р а м м ы<p> </p>н а<p> </p>я з ы к е<p> </p>А с с е м б л е р а
		</marquee>
	</div>
</div>
   <div id="width-page">
      <div id="page">
		 <div id="page_content">
            <div class="themes"> 
	<a name="st"></a>
	<h2>Структура программы на языке Ассемблера.</h2>
	<p class="stress">	 </p> 
	<p class="text">
		<b><big>Исходный программный модуль</big></b> – это последовательность
		предложений. Различают <b>два типа</b> предложений:
		<ul class="text">
		<li>инструкции процессора;</li>
		<li>директивы ассемблера. </li>
		</ul></p>
	<p class="text">
		Инструкции управляют работой процессора, а директивы указывают ассемблеру
		и редактору связей, каким образом следует объединять, инструкции для создания
		модуля, который и станет работающей программой.<br><br>
		Инструкция процессора на языке ассемблера состоит не более чем из четырех полей
		и имеет следующий формат:<br><br><code>[[метка:]] мнемоника [[операнды]] 
		[[;комментарии]]</code><br><br>
		<b><ins>Единственное обязательное поле</ins></b> – поле <b>кода операции (мнемоника)</b>, 
		определяющее инструкцию, которую должен выполнить микропроцессор. 
		Поле операндов определяется кодом операции и содержит дополнительную 
		информацию о команде. Каждому коду операции соответствует определенное
		число операндов. <br><br><b><ins>Метка</ins></b> служит для обозначения 
		какого-то определенного места в памяти, т. е. содержит в символическом
		виде адрес, по которому храниться инструкция.<br> Преобразование 
		символических имен в действительные адреса осуществляется программой
		ассемблера.<br>Часть строки исходного текста после символа «;» 
		(если он не является элементом знаковой константы или строки знаков)
		считается комментарием и ассемблером игнорируется.<br><br>
		<ins><b>Пример:</b></ins></p>
		<table class="text">
		<tr>
			<td width="100"><b>Метка</b></td>
			<td width="150"><b>Код операции</b></td>
			<td width="100"><b>Операнды</b></td>
			<td width="150"><b>;Комментарий</b></td>
		</tr>
		<tr>
			<td>MET:</td>
			<td>MOVE</td>
			<td>AX, BX</td>
			<td>;Пересылка</td>
		</tr>
		</table>
	<p class="text">			
		Структура директивы аналогична структуре инструкции. <br><br>
		<big><b>Предложения</b></big> определяют структуру и функции программы,
		они могут начинаться с любой позиции и содержать не более <b>128</b>
		символов. При записи предложений действуют следующие правила 
		расстановки пробелов: <br>
		<ul class="text">
		<li>пробел обязателен между рядом стоящими идентификаторами и/или числами
		(чтобы отделить их друг от друга); </li>
		<li>внутри идентификаторов и чисел пробелы недопустимы; </li>
		<li>в остальных местах пробелы можно ставить или не ставить; </li>
		<li>там, где допустим один пробел, можно ставить любое число пробелов.</li>
		</ul></p>
	<p class="text">
		Все предложения языка ассемблера делятся на <b>директивы ассемблера</b> и 
		<b>инструкции (команды) процессора</b>. <br><br>
		<b>Директивы ассемблера</b> действуют лишь в период компиляции программы и позволяют
		устанавливать режимы компиляции, задавать структуру сегментации программы, 
		определять содержимое полей данных, управлять печатью листинга программы, 
		а также обеспечивают условную компиляцию и некоторые другие функции. В 
		результате обработки директив компилятором объектный код не генерируется.<br> 
		<br><b>Инструкции процессора</b> представляют собой мнемоническую форму записи 
		машинных команд, непосредственно выполняемых микропроцессором.<br><br>
		
		<big><b>Выражения.</b></big><br>
		В языке ассемблера выражения могут быть использованы в инструкциях или директивах
		и состоят из <b>операндов</b> и <b>операторов</b>.<br><br>
		<b>Операнды</b> представляют значения, регистры или адреса ячеек памяти, 
		используемых определенным образом по контексту программы.<br><br>
		<b>Операторы</b> выполняют арифметические, логические, побитовые и другие 
		операции над операндами выражений.<br>
	</p>
	
	<a name="com"></a>
	<h2>Программа типа СОМ.</h2>
	<p class="stress"></p> 
	<p class="text">
		<big>Программа, выводящая на экран текст <b>«Hello world!»</b></big>.<br>
		<table>
		<tr>
			<td colspan="2"><comment>; hello-l.asm <br>; Выводит на экран сообщение 
			"Hello World!" и завершается </comment></td>
		</tr>
		<tr>
			<td width="333px"><code>.MODEL TINY</code></td>
			<td><comment>; модель памяти, используемая для СОМ</comment></td>
		</tr>
		<tr>
			<td><code>.CODE</code></td>
			<td><comment>; начало сегмента кода</comment></td>
		</tr>
		<tr>
			<td><code>ORG  100H</code></td>
			<td></td>
		</tr>
		<tr>
			<td><code>START: MOV AH,9</code></td>
			<td><comment>; номер функции DOS - в АН</comment></td>
		</tr>
		<tr>
			<td><code>MOV DX, OFFSET MESSAGE</code></td>
			<td><comment>; адрес строки - в DX</comment></td>
		</tr>
		<tr>
			<td><code>INT 21H</code></td>
			<td><comment>; вызов системной функции DOS</comment></td>
		</tr>
		<tr>
			<td><code>RET</code></td>
			<td><comment>; завершение СОМ-программы</comment></td>
		</tr>
		<tr>
			<td><code>MESSAGE  DB  "Hello World!",0DH,0AH,'$'</code></td>
			<td><comment>; строка для вывода</comment></td>
		</tr>
		<tr>
			<td><code>END  START</code></td>
			<td><comment>; конец программы</comment></td>
		</tr>
	</table>
	
</p><p class="text">
		<big><b>Компиляция</b></big><br>
		<b>Компиляция</b> — трансляция программы, составленной на исходном
		языке.
		На этапе трансляции решается несколько задач:<ul class="text">
		<li>перевод команд ассемблера в соответствующие машинные команды;</li>
		<li>построение таблицы символов;</li>
		<li>расширение макросов;</li>
		<li>формирование файла листинга и объектного модуля.</li>
		<br><ins><b><big>Листинг трансляции:</big></b></ins>
		<center><IMG SRC="content/img-0004.jpg" width="650px"></center>
			<ul><li>Команды программы имеют различную длину и располагаются в 
			памяти вплотную друг к другу. Так, первая команда <b>mov AX,text</b>, 
			начинающаяся с байта <b>0000</b> сегмента, занимает <b>3</b> байта.
			Соответственно, вторая команда начинается с байта <b>0003</b>. Вторая
			команда имеет длину <b>2</b> байта, поэтому третья команда начинается
			с байта <b>0005</b> и т.д.</li>
			<li>Предложения программы с операторами <b>segment</b>, <b>assume</b>,
			<b>end</b> не транслируются в какие-либо машинные коды и не находят 
			отражения в памяти. Они нужны лишь для передачи транслятору 
			служебной информации.</li>
			<li>Транслятор не мог полностью определить код команды <b>mov AX,text</b>.
			В этой команде в регистр <b>AX</b> засылается адрес сегмента <b>text</b>.
			Однако этот адрес станет известен лишь в процессе загрузки выполнимого 
			файла программы в память. По этому в листинге на месте этого адреса 
			стоит прочерк.</li>
			<li>Текст, введенный  в программу, также оттранслировался: вместо символов
			текста в загрузочный файл попадут коды<b> ASCII</b> этих символов.</b> 
			</ul>
		</ul>
		</p>
		<p class="text">
		<ins>Для <b>TASM</b>:</ins><br>
		<br><code>tasm hello-1.asm</code><br><br><ins>Для <b>MASM</b>:</ins>
		<br><br><code>ml /c hello-1.asm</code><br><br>
		<big><b>Компоновка</b></big><br>
		Главная цель этого этапа — преобразовать код и данные в объектных файлах
		в их перемещаемое выполняемое отображение. После этого 
		операционная система может загрузить такой файл в память и выполнить его.
		<br><br><ins>Для <b>TLINK</b>:</ins><br>
		<br><code>tlink /t /x hello-1.obj</code><br><br><ins>Для <b>MASM</b>:</ins>
		<br><br><code>Link hello-1.obj,,NUL,,,<br>exe2bin hello-1.exe hello-1.com
		</code><br><br>
		Теперь получился файл <b>HELLO-1.COM</b> . Если его выполнить, на экране 
		появится строка «Hello World!» и программа завершится.
		</p>	
 <!-- страничка -- END -->
   </div></div></div>
 
      <div id="basement"><div id="basement-content">
         <div id="basement_text">
            <br>Программирование на Машинно-Ориентированных Языках.<br>
			Преподаватель: Коробов С.А.<br><br>
      </div>
	  <a class="home2" href="../index.html"><img title="На главную" src="content/home.png"></a>
	  <a class="book" href="themes_3.html"><img title="К оглавлению" src="content/book.png"></a>
	  </div>  
	  <a class="min1" href="t5.html"><img title="Предыдущая тема" src="content/left.png"></a>
	  <a class="max1" href="t7.html"><img title="Следующая тема" src="content/right.png"></a>
	  </div>
</body>
 </html>
